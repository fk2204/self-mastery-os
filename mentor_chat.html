<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mentor Conversations - SELF-MASTERY OS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=JetBrains+Mono:wght@400;500;600&family=Crimson+Pro:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-void: #0a0a0b;
            --bg-deep: #111113;
            --bg-surface: #18181b;
            --bg-elevated: #1f1f23;
            --bg-hover: #27272a;
            --border-subtle: #2a2a2f;
            --border-accent: #3a3a42;
            --text-primary: #fafafa;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --gold-primary: #d4a847;
            --gold-light: #f0d078;
            --gold-dim: #8b7355;
            --success: #22c55e;
            --success-dim: #166534;
            --warning: #f59e0b;
            --danger: #ef4444;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --accent-cyan: #06b6d4;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { font-size: 16px; scroll-behavior: smooth; }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg-void);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse 80% 50% at 20% -10%, rgba(212, 168, 71, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 80% 100%, rgba(59, 130, 246, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 1000;
        }

        .grid-pattern {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image:
                linear-gradient(var(--border-subtle) 1px, transparent 1px),
                linear-gradient(90deg, var(--border-subtle) 1px, transparent 1px);
            background-size: 60px 60px;
            opacity: 0.1;
            pointer-events: none;
            z-index: -1;
        }

        /* Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 320px;
            background: var(--bg-surface);
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            z-index: 100;
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .logo {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            letter-spacing: 0.1em;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-dim) 100%);
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
        }

        .back-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-muted);
            font-size: 0.8rem;
            text-decoration: none;
            margin-top: 0.75rem;
            transition: color 0.2s;
        }

        .back-link:hover {
            color: var(--gold-primary);
        }

        /* Search and Filters */
        .search-section {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .search-box {
            width: 100%;
            padding: 0.75rem 1rem;
            padding-left: 2.5rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            position: relative;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--gold-primary);
        }

        .search-wrapper {
            position: relative;
        }

        .search-wrapper svg {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            color: var(--text-muted);
        }

        .category-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .category-btn {
            padding: 0.4rem 0.75rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            color: var(--text-muted);
            font-size: 0.7rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .category-btn:hover {
            border-color: var(--border-accent);
            color: var(--text-secondary);
        }

        .category-btn.active {
            background: var(--gold-primary);
            border-color: var(--gold-primary);
            color: var(--bg-void);
        }

        /* Mentor List */
        .mentor-list {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .mentor-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .mentor-item:hover {
            border-color: var(--border-accent);
            transform: translateX(4px);
        }

        .mentor-item.active {
            border-color: var(--gold-primary);
            background: rgba(212, 168, 71, 0.1);
        }

        .mentor-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--bg-surface), var(--bg-hover));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.25rem;
            color: var(--gold-primary);
            flex-shrink: 0;
        }

        .mentor-info {
            flex-grow: 1;
            min-width: 0;
        }

        .mentor-name {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1rem;
            letter-spacing: 0.05em;
            color: var(--text-primary);
        }

        .mentor-domain {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 0.15rem;
        }

        .mentor-sessions {
            font-size: 0.65rem;
            color: var(--gold-dim);
            margin-top: 0.25rem;
        }

        .mentor-category-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        /* Main Content */
        .main-content {
            flex-grow: 1;
            margin-left: 320px;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Chat Header */
        .chat-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--border-subtle);
            background: var(--bg-surface);
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .chat-mentor-avatar {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--bg-deep), var(--bg-elevated));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.75rem;
            color: var(--gold-primary);
            border: 2px solid var(--gold-dim);
        }

        .chat-mentor-info {
            flex-grow: 1;
        }

        .chat-mentor-name {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.75rem;
            letter-spacing: 0.05em;
            color: var(--text-primary);
        }

        .chat-mentor-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 0.25rem;
        }

        .chat-mentor-era {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .chat-mentor-domain {
            font-size: 0.8rem;
            color: var(--gold-primary);
        }

        .chat-header-actions {
            display: flex;
            gap: 0.75rem;
        }

        .header-btn {
            padding: 0.6rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .header-btn:hover {
            background: var(--bg-hover);
            border-color: var(--border-accent);
            color: var(--text-primary);
        }

        .header-btn svg {
            width: 16px;
            height: 16px;
        }

        /* Mentor Profile Panel */
        .mentor-profile-panel {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100vh;
            background: var(--bg-surface);
            border-left: 1px solid var(--border-subtle);
            z-index: 200;
            overflow-y: auto;
        }

        .mentor-profile-panel.active {
            display: block;
        }

        .profile-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .profile-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.1rem;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
        }

        .close-profile {
            width: 32px;
            height: 32px;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .close-profile:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .profile-content {
            padding: 1.5rem;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--bg-deep), var(--bg-elevated));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            color: var(--gold-primary);
            border: 3px solid var(--gold-dim);
            margin: 0 auto 1.5rem;
        }

        .profile-name {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            letter-spacing: 0.05em;
            color: var(--text-primary);
            text-align: center;
        }

        .profile-era {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-align: center;
            margin-top: 0.25rem;
        }

        .profile-section {
            margin-top: 1.5rem;
        }

        .profile-section-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 0.85rem;
            letter-spacing: 0.15em;
            color: var(--gold-primary);
            margin-bottom: 0.75rem;
        }

        .profile-expertise {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .expertise-tag {
            padding: 0.35rem 0.75rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        .teaching-item {
            padding: 0.75rem;
            background: var(--bg-elevated);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            font-family: 'Crimson Pro', serif;
            font-size: 0.95rem;
            font-style: italic;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-box {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }

        .stat-value {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            color: var(--gold-primary);
        }

        .stat-label {
            font-size: 0.65rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
            letter-spacing: 0.1em;
        }

        /* Chat Area */
        .chat-area {
            flex-grow: 1;
            overflow-y: auto;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .chat-welcome {
            text-align: center;
            padding: 3rem 2rem;
            max-width: 600px;
            margin: auto;
        }

        .chat-welcome-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, rgba(212, 168, 71, 0.2), rgba(212, 168, 71, 0.05));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }

        .chat-welcome-icon svg {
            width: 40px;
            height: 40px;
            color: var(--gold-primary);
        }

        .chat-welcome-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            letter-spacing: 0.1em;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
        }

        .chat-welcome-text {
            font-size: 0.9rem;
            color: var(--text-muted);
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .quick-prompts {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            justify-content: center;
        }

        .quick-prompt {
            padding: 0.6rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-prompt:hover {
            border-color: var(--gold-primary);
            color: var(--gold-primary);
        }

        /* Messages */
        .message {
            display: flex;
            gap: 1rem;
            max-width: 80%;
            animation: messageIn 0.3s ease;
        }

        @keyframes messageIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            margin-left: auto;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--bg-deep), var(--bg-elevated));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1rem;
            color: var(--gold-primary);
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            color: white;
        }

        .message-content {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1rem 1.25rem;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.1));
            border-color: rgba(59, 130, 246, 0.3);
        }

        .message.mentor .message-content {
            background: linear-gradient(135deg, rgba(212, 168, 71, 0.1), rgba(212, 168, 71, 0.02));
            border-color: rgba(212, 168, 71, 0.2);
        }

        .message-text {
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .message.mentor .message-text {
            font-family: 'Crimson Pro', serif;
            font-size: 1rem;
            white-space: pre-wrap;
        }

        .message.mentor .message-text strong {
            color: var(--gold-primary);
            font-weight: 600;
            display: block;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            letter-spacing: 0.05em;
        }

        .message.mentor .message-text strong:first-child {
            margin-top: 0;
        }

        .message.mentor .message-text ol,
        .message.mentor .message-text ul {
            margin: 0.5rem 0;
            padding-left: 1.5rem;
        }

        .message.mentor .message-text li {
            margin-bottom: 0.5rem;
        }

        .message.mentor .message-text em {
            color: var(--text-secondary);
            font-style: italic;
        }

        .message.mentor .message-text .principle-quote {
            border-left: 3px solid var(--gold-primary);
            padding-left: 1rem;
            margin: 1rem 0;
            font-style: italic;
            color: var(--text-secondary);
        }

        .message.mentor .message-text .section-icon {
            font-size: 1.1rem;
            margin-right: 0.5rem;
        }

        .message.mentor .message-text .list-header {
            color: var(--gold-light);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
        }

        .message.mentor .message-text .list-num {
            color: var(--gold-primary);
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
        }

        .message.mentor .message-bubble {
            max-width: 90%;
        }

        .message.mentor {
            max-width: 100%;
        }

        .message-time {
            font-size: 0.65rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
        }

        /* Chat Input */
        .chat-input-area {
            padding: 1.5rem 2rem;
            border-top: 1px solid var(--border-subtle);
            background: var(--bg-surface);
        }

        .chat-input-wrapper {
            display: flex;
            gap: 1rem;
            align-items: flex-end;
        }

        .chat-input {
            flex-grow: 1;
            padding: 1rem 1.25rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            resize: none;
            min-height: 50px;
            max-height: 150px;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--gold-primary);
        }

        .chat-input::placeholder {
            color: var(--text-muted);
        }

        .send-btn {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-dim) 100%);
            border: none;
            border-radius: 12px;
            color: var(--bg-void);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(212, 168, 71, 0.3);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .send-btn svg {
            width: 20px;
            height: 20px;
        }

        .chat-input-hint {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Notes Panel */
        .notes-panel {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100vh;
            background: var(--bg-surface);
            border-left: 1px solid var(--border-subtle);
            z-index: 200;
            overflow-y: auto;
        }

        .notes-panel.active {
            display: block;
        }

        .notes-content {
            padding: 1.5rem;
        }

        .notes-textarea {
            width: 100%;
            min-height: 200px;
            padding: 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            resize: vertical;
        }

        .notes-textarea:focus {
            outline: none;
            border-color: var(--gold-primary);
        }

        .insight-input-area {
            margin-top: 1rem;
        }

        .insight-input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
        }

        .insight-input:focus {
            outline: none;
            border-color: var(--gold-primary);
        }

        .add-insight-btn {
            width: 100%;
            margin-top: 0.5rem;
            padding: 0.6rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .add-insight-btn:hover {
            background: var(--bg-hover);
            border-color: var(--gold-primary);
            color: var(--gold-primary);
        }

        .insights-list {
            margin-top: 1rem;
        }

        .insight-item {
            padding: 0.75rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .insight-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .remove-insight {
            width: 24px;
            height: 24px;
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.5;
            transition: opacity 0.2s;
        }

        .remove-insight:hover {
            opacity: 1;
            color: var(--danger);
        }

        /* Favorite Quotes */
        .favorite-quotes-section {
            margin-top: 1.5rem;
        }

        .quote-item {
            padding: 0.75rem;
            background: var(--bg-elevated);
            border-left: 3px solid var(--gold-primary);
            border-radius: 0 8px 8px 0;
            margin-bottom: 0.5rem;
        }

        .quote-text {
            font-family: 'Crimson Pro', serif;
            font-size: 0.9rem;
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Save Indicator */
        .save-indicator {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 0.75rem 1.25rem;
            background: var(--success);
            color: white;
            border-radius: 8px;
            font-size: 0.85rem;
            display: none;
            z-index: 300;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(10px); }
            15% { opacity: 1; transform: translateY(0); }
            85% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-10px); }
        }

        /* Mood Selector */
        .mood-selector {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .mood-btn {
            padding: 0.5rem 0.75rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-muted);
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .mood-btn:hover {
            border-color: var(--border-accent);
        }

        .mood-btn.active {
            border-color: var(--gold-primary);
            color: var(--gold-primary);
        }

        /* Topic buttons in welcome */
        .topic-section {
            margin-top: 1.5rem;
        }

        .topic-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            letter-spacing: 0.1em;
            margin-bottom: 0.75rem;
        }

        /* Typing indicator */
        .typing-indicator {
            display: none;
            padding: 1rem;
            max-width: 80%;
        }

        .typing-indicator.active {
            display: flex;
            gap: 1rem;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
            align-items: center;
            padding: 0.75rem 1rem;
            background: rgba(212, 168, 71, 0.1);
            border: 1px solid rgba(212, 168, 71, 0.2);
            border-radius: 12px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--gold-primary);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingBounce {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-8px); }
        }

        /* Empty state */
        .no-mentor-selected {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: 2rem;
        }

        .no-mentor-content {
            max-width: 400px;
        }

        .no-mentor-icon {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--bg-elevated), var(--bg-surface));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            border: 1px solid var(--border-subtle);
        }

        .no-mentor-icon svg {
            width: 50px;
            height: 50px;
            color: var(--text-muted);
        }

        .no-mentor-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .no-mentor-text {
            font-size: 0.9rem;
            color: var(--text-muted);
            line-height: 1.6;
        }

        /* Session History */
        .session-history {
            margin-top: 1.5rem;
        }

        .session-item {
            padding: 0.75rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .session-item:hover {
            border-color: var(--border-accent);
        }

        .session-date {
            font-size: 0.75rem;
            color: var(--gold-primary);
        }

        .session-preview {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .session-mood {
            font-size: 0.65rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }
    </style>
</head>
<body>
    <div class="grid-pattern"></div>

    <div class="app-container">
        <!-- Sidebar - Mentor List -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon"></div>
                    MENTOR CONVERSATIONS
                </div>
                <a href="dashboard.html" class="back-link">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back to Dashboard
                </a>
            </div>

            <div class="search-section">
                <div class="search-wrapper">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/>
                    </svg>
                    <input type="text" class="search-box" placeholder="Search mentors..." id="mentorSearch">
                </div>
                <div class="category-filters" id="categoryFilters">
                    <button class="category-btn active" data-category="all">All</button>
                </div>
            </div>

            <div class="mentor-list" id="mentorList">
                <!-- Mentors will be populated here -->
            </div>
        </aside>

        <!-- Main Content - Chat Area -->
        <main class="main-content" id="mainContent">
            <!-- No mentor selected state -->
            <div class="no-mentor-selected" id="noMentorSelected">
                <div class="no-mentor-content">
                    <div class="no-mentor-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                    </div>
                    <h2 class="no-mentor-title">SELECT A MENTOR</h2>
                    <p class="no-mentor-text">Choose a mentor from the sidebar to begin a conversation. Each mentor offers unique wisdom based on their teachings and philosophy.</p>
                </div>
            </div>

            <!-- Chat Interface (hidden until mentor selected) -->
            <div id="chatInterface" style="display: none; height: 100%; display: flex; flex-direction: column;">
                <div class="chat-header">
                    <div class="chat-mentor-avatar" id="chatMentorAvatar">MA</div>
                    <div class="chat-mentor-info">
                        <div class="chat-mentor-name" id="chatMentorName">Select a Mentor</div>
                        <div class="chat-mentor-meta">
                            <span class="chat-mentor-era" id="chatMentorEra"></span>
                            <span class="chat-mentor-domain" id="chatMentorDomain"></span>
                        </div>
                    </div>
                    <div class="chat-header-actions">
                        <button class="header-btn" onclick="toggleProfile()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="7" r="4"/><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            </svg>
                            Profile
                        </button>
                        <button class="header-btn" onclick="toggleNotes()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>
                            </svg>
                            Notes
                        </button>
                        <button class="header-btn" onclick="saveConversation()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                                <polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/>
                            </svg>
                            Save
                        </button>
                    </div>
                </div>

                <div class="chat-area" id="chatArea">
                    <!-- Welcome message will appear here -->
                </div>

                <div class="typing-indicator" id="typingIndicator">
                    <div class="message-avatar" id="typingAvatar">MA</div>
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>

                <div class="chat-input-area">
                    <div class="chat-input-wrapper">
                        <textarea class="chat-input" id="chatInput" placeholder="Ask a question or share what's on your mind..." rows="1"></textarea>
                        <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>
                            </svg>
                        </button>
                    </div>
                    <div class="chat-input-hint">
                        <span>Press Enter to send, Shift+Enter for new line</span>
                    </div>
                </div>
            </div>
        </main>

        <!-- Mentor Profile Panel -->
        <div class="mentor-profile-panel" id="profilePanel">
            <div class="profile-header">
                <span class="profile-title">MENTOR PROFILE</span>
                <button class="close-profile" onclick="toggleProfile()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="profile-content">
                <div class="profile-avatar" id="profileAvatar">MA</div>
                <div class="profile-name" id="profileName">Marcus Aurelius</div>
                <div class="profile-era" id="profileEra">121-180 AD</div>

                <div class="profile-stats">
                    <div class="stat-box">
                        <div class="stat-value" id="profileSessions">0</div>
                        <div class="stat-label">SESSIONS</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="profileInfluence">10</div>
                        <div class="stat-label">INFLUENCE</div>
                    </div>
                </div>

                <div class="profile-section">
                    <div class="profile-section-title">EXPERTISE</div>
                    <div class="profile-expertise" id="profileExpertise">
                        <!-- Tags will be populated here -->
                    </div>
                </div>

                <div class="profile-section">
                    <div class="profile-section-title">KEY TEACHINGS</div>
                    <div id="profileTeachings">
                        <!-- Teachings will be populated here -->
                    </div>
                </div>

                <div class="profile-section session-history">
                    <div class="profile-section-title">PAST SESSIONS</div>
                    <div id="profileHistory">
                        <!-- Session history will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Panel -->
        <div class="notes-panel" id="notesPanel">
            <div class="profile-header">
                <span class="profile-title">SESSION NOTES & INSIGHTS</span>
                <button class="close-profile" onclick="toggleNotes()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="notes-content">
                <div class="profile-section-title">PERSONAL NOTES</div>
                <textarea class="notes-textarea" id="notesTextarea" placeholder="Write your thoughts, reflections, and notes about this mentor..."></textarea>

                <div class="profile-section-title" style="margin-top: 1.5rem;">SESSION MOOD</div>
                <div class="mood-selector">
                    <button class="mood-btn" data-mood="reflective">Reflective</button>
                    <button class="mood-btn" data-mood="motivated">Motivated</button>
                    <button class="mood-btn" data-mood="curious">Curious</button>
                    <button class="mood-btn" data-mood="challenged">Challenged</button>
                </div>

                <div class="profile-section-title" style="margin-top: 1.5rem;">ADD INSIGHT</div>
                <div class="insight-input-area">
                    <input type="text" class="insight-input" id="insightInput" placeholder="Capture a key insight from this conversation...">
                    <button class="add-insight-btn" onclick="addInsight()">+ Add Insight</button>
                </div>
                <div class="insights-list" id="insightsList">
                    <!-- Insights will be populated here -->
                </div>

                <div class="favorite-quotes-section">
                    <div class="profile-section-title">FAVORITE QUOTES</div>
                    <div id="favoriteQuotes">
                        <p style="font-size: 0.8rem; color: var(--text-muted);">Click on a mentor's response to save it as a favorite quote.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Save Indicator -->
    <div class="save-indicator" id="saveIndicator">Conversation saved!</div>

    <script>
        // State
        let mentorsData = null;
        let conversationsData = null;
        let currentMentor = null;
        let currentSession = {
            messages: [],
            insights: [],
            mood: null
        };

        // Category colors
        const categoryColors = {
            philosophy: '#8b5cf6',
            business: '#3b82f6',
            mindset: '#ef4444',
            wealth: '#22c55e',
            leadership: '#f59e0b',
            creativity: '#ec4899',
            science: '#06b6d4',
            communication: '#d4a847'
        };

        // Initialize
        async function init() {
            await loadData();
            renderCategoryFilters();
            renderMentorList();
            setupEventListeners();
        }

        // Load data
        async function loadData() {
            // Try to load from localStorage first
            const storedMentors = localStorage.getItem('mentorsLibrary');
            const storedConversations = localStorage.getItem('mentorConversations');

            if (storedMentors) {
                mentorsData = JSON.parse(storedMentors);
            } else {
                // Load from file (in real app, this would be a fetch)
                mentorsData = await loadMentorsLibrary();
                localStorage.setItem('mentorsLibrary', JSON.stringify(mentorsData));
            }

            if (storedConversations) {
                conversationsData = JSON.parse(storedConversations);
            } else {
                conversationsData = {
                    version: "1.0",
                    created: new Date().toISOString().split('T')[0],
                    last_updated: new Date().toISOString().split('T')[0],
                    total_sessions: 0,
                    favorite_mentors: [],
                    conversations: {}
                };
                localStorage.setItem('mentorConversations', JSON.stringify(conversationsData));
            }
        }

        // Mock load mentors library (in production, would fetch from JSON file)
        async function loadMentorsLibrary() {
            // This would normally fetch from the JSON file
            // For now, we'll return inline data
            return {
                categories: {
                    philosophy: { name: "Philosophy & Wisdom", color: "#8b5cf6" },
                    business: { name: "Business & Entrepreneurship", color: "#3b82f6" },
                    mindset: { name: "Mindset & Performance", color: "#ef4444" },
                    wealth: { name: "Wealth & Investing", color: "#22c55e" },
                    leadership: { name: "Leadership & Strategy", color: "#f59e0b" },
                    creativity: { name: "Creativity & Innovation", color: "#ec4899" },
                    science: { name: "Science & Learning", color: "#06b6d4" },
                    communication: { name: "Communication & Influence", color: "#d4a847" }
                },
                mentors: [
                    {
                        id: "socrates",
                        name: "Socrates",
                        era: "470-399 BC",
                        domain: "Philosophy",
                        category: "philosophy",
                        expertise: ["Critical thinking", "Questioning assumptions", "Self-examination"],
                        key_teachings: [
                            "The unexamined life is not worth living.",
                            "I know that I know nothing.",
                            "True wisdom comes to each of us when we realize how little we understand about life."
                        ],
                        conversation_prompts: {
                            greeting: "Ah, a seeker of wisdom approaches. Tell me, what question troubles your mind today?",
                            on_struggle: "You speak of difficulty. But consider - is this struggle not revealing what you truly value?",
                            on_decision: "Before we examine your choice, let us first question your assumptions.",
                            on_success: "You celebrate this achievement. But tell me, what virtue did you practice to earn it?",
                            on_fear: "You fear this outcome. But what is the worst that could happen?",
                            closing: "We have questioned much today. The answers you seek lie within."
                        },
                        response_templates: [
                            "Let us examine this more closely. You say '{topic}' - but what do you mean by that exactly?",
                            "And when you consider the opposite view, what truth might you find there?",
                            "This is a worthy question. But perhaps the deeper question is: why does this matter to you?",
                            "You seem certain of this. What would it take to change your mind?",
                            "Tell me more about what leads you to this conclusion."
                        ],
                        influence: 10
                    },
                    {
                        id: "marcus_aurelius",
                        name: "Marcus Aurelius",
                        era: "121-180 AD",
                        domain: "Stoicism",
                        category: "philosophy",
                        expertise: ["Self-discipline", "Duty", "Inner peace", "Leadership under pressure"],
                        key_teachings: [
                            "You have power over your mind - not outside events.",
                            "The happiness of your life depends upon the quality of your thoughts.",
                            "Waste no more time arguing about what a good man should be. Be one.",
                            "The impediment to action advances action. What stands in the way becomes the way."
                        ],
                        conversation_prompts: {
                            greeting: "Welcome, friend. What weighs upon your mind today?",
                            on_struggle: "This obstacle you face - it is not blocking your path. It IS your path.",
                            on_decision: "Consider: does this choice serve your highest self?",
                            on_success: "Do not become attached to this outcome. What matters is who you became.",
                            on_fear: "You fear what you cannot control. Your power resides in your response.",
                            closing: "Go now and apply reason to your actions."
                        },
                        response_templates: [
                            "The obstacle is the way. In this difficulty with '{topic}', what strength is being forged?",
                            "You cannot control this. But you can control your response. What would your best self choose?",
                            "Is this within your control? If yes, act. If no, accept.",
                            "Remember - it is not the thing itself that disturbs you, but your judgment of it.",
                            "How would you advise a friend facing this same situation?"
                        ],
                        influence: 10
                    },
                    {
                        id: "seneca",
                        name: "Seneca",
                        era: "4 BC - 65 AD",
                        domain: "Stoicism",
                        category: "philosophy",
                        expertise: ["Practical wisdom", "Time management", "Dealing with adversity"],
                        key_teachings: [
                            "It is not that we have a short time to live, but that we waste a lot of it.",
                            "We suffer more in imagination than in reality.",
                            "Luck is what happens when preparation meets opportunity."
                        ],
                        conversation_prompts: {
                            greeting: "Life is brief, my friend. What truly matters to you right now?",
                            on_struggle: "Are you suffering from the thing itself, or from your thoughts about it?",
                            on_decision: "Does this choice honor your precious time?",
                            on_success: "Enjoy it, but hold it loosely - for fortune is fickle.",
                            on_fear: "Rehearse in your mind what you fear. It loses power when examined.",
                            closing: "Use your time well. It is the only wealth that truly belongs to you."
                        },
                        response_templates: [
                            "We suffer more in imagination than reality. Is your fear of '{topic}' worse than the thing itself?",
                            "If you had only one year to live, would you spend time on this?",
                            "The wise person does at once what the fool does finally. What action can you take now?",
                            "Ask yourself: am I afraid of this, or merely uncomfortable with it?"
                        ],
                        influence: 9
                    },
                    {
                        id: "naval_ravikant",
                        name: "Naval Ravikant",
                        era: "1974-Present",
                        domain: "Wealth & Happiness",
                        category: "wealth",
                        expertise: ["Building wealth", "Leverage", "Specific knowledge", "Inner peace"],
                        key_teachings: [
                            "Seek wealth, not money or status.",
                            "Learn to sell. Learn to build. If you can do both, you will be unstoppable.",
                            "Specific knowledge cannot be taught, but it can be learned."
                        ],
                        conversation_prompts: {
                            greeting: "Hey. No BS - what's actually on your mind?",
                            on_struggle: "Are you struggling in the direction of your goals, or just suffering?",
                            on_decision: "What decision would you make if you had no ego attached?",
                            on_success: "Are you building something that gives you freedom?",
                            on_fear: "Fear usually means you're onto something important.",
                            closing: "Keep building. Compound effects take time."
                        },
                        response_templates: [
                            "Here's the thing about '{topic}' - are you trading time for money, or building something that scales?",
                            "What would you do even if you weren't paid? That's where specific knowledge lives.",
                            "Play long-term games with long-term people. How does this affect your reputation over decades?",
                            "Happiness is a choice and a skill. Are you choosing it?"
                        ],
                        influence: 8
                    },
                    {
                        id: "david_goggins",
                        name: "David Goggins",
                        era: "1975-Present",
                        domain: "Mental Toughness",
                        category: "mindset",
                        expertise: ["Extreme mental toughness", "Overcoming limits", "Discipline"],
                        key_teachings: [
                            "You're in danger of living a life so comfortable that you will die without realizing your potential.",
                            "The only way to grow is to suffer.",
                            "We have so much more in the tank than we think we do."
                        ],
                        conversation_prompts: {
                            greeting: "What's up. Are you here for sympathy or to get better?",
                            on_struggle: "Good. Struggle is where you grow. Are you running toward it or away?",
                            on_decision: "Stop looking for easy. What's the hardest version of this?",
                            on_success: "Cool. Now forget about it. What are you going to do TODAY?",
                            on_fear: "Fear means you're at the edge. Perfect. That's where you need to be.",
                            closing: "Stay hard. Keep suffering. It's the only way."
                        },
                        response_templates: [
                            "About '{topic}' - what would the hardest person in the world do?",
                            "You're only at 40% of your capacity. Push harder.",
                            "Your brain is your governor. It's trying to keep you safe. But safe doesn't win.",
                            "Accountability mirror. Are you doing what you said you'd do?"
                        ],
                        influence: 8
                    },
                    {
                        id: "jocko_willink",
                        name: "Jocko Willink",
                        era: "1971-Present",
                        domain: "Leadership & Discipline",
                        category: "leadership",
                        expertise: ["Extreme ownership", "Military leadership", "Discipline"],
                        key_teachings: [
                            "Discipline equals freedom.",
                            "There are no bad teams, only bad leaders.",
                            "Extreme ownership. Leaders must own everything in their world."
                        ],
                        conversation_prompts: {
                            greeting: "Good. You showed up. What's the problem and what's your plan?",
                            on_struggle: "Setback? Good. Now you learn. What's the lesson?",
                            on_decision: "What does extreme ownership look like here?",
                            on_success: "Check. Don't get complacent. Stay ready.",
                            on_fear: "Courage isn't the absence of fear - it's action despite fear.",
                            closing: "Get after it. Take ownership and execute."
                        },
                        response_templates: [
                            "On '{topic}' - where are you not taking ownership?",
                            "Detach. Look at this situation objectively. What do you see?",
                            "Discipline equals freedom. What discipline would give you more freedom?",
                            "Good. Whatever happened - Good. Now you can learn from it."
                        ],
                        influence: 8
                    },
                    {
                        id: "alex_hormozi",
                        name: "Alex Hormozi",
                        era: "1992-Present",
                        domain: "Business & Wealth Building",
                        category: "business",
                        expertise: ["Offers and pricing", "Scaling businesses", "No-BS execution"],
                        key_teachings: [
                            "Make offers so good people feel stupid saying no.",
                            "The problem isn't that you're not working hard enough.",
                            "Volume negates luck."
                        ],
                        conversation_prompts: {
                            greeting: "What's up. What's the one thing holding your business back?",
                            on_struggle: "Is this actually a problem, or just uncomfortable?",
                            on_decision: "Would this decision make you more money in 10 years?",
                            on_success: "Good execution. Can you do it again? What's the system?",
                            on_fear: "Fear of failure is just fear of other people's opinions.",
                            closing: "Stop overthinking. Start testing. Go do the thing."
                        },
                        response_templates: [
                            "About '{topic}' - are you solving this problem or rearranging deck chairs?",
                            "What would make this offer so good people feel stupid saying no?",
                            "Volume negates luck. How many attempts have you actually made?",
                            "You know what to do. You're just not doing it. What's stopping you?"
                        ],
                        influence: 7
                    },
                    {
                        id: "warren_buffett",
                        name: "Warren Buffett",
                        era: "1930-Present",
                        domain: "Investing",
                        category: "wealth",
                        expertise: ["Value investing", "Long-term thinking", "Patience"],
                        key_teachings: [
                            "Be fearful when others are greedy, and greedy when others are fearful.",
                            "Rule No. 1: Never lose money. Rule No. 2: Never forget rule No. 1.",
                            "Price is what you pay. Value is what you get."
                        ],
                        conversation_prompts: {
                            greeting: "Pull up a chair. What's on your mind about building wealth?",
                            on_struggle: "Are you thinking long enough term?",
                            on_decision: "Would you be comfortable if this was on the front page tomorrow?",
                            on_success: "Do you understand WHY it worked? Can you repeat it?",
                            on_fear: "When everyone else is panicking, that's when opportunities appear.",
                            closing: "Keep it simple. Invest in what you understand."
                        },
                        response_templates: [
                            "About '{topic}' - do you really understand this, or are you guessing?",
                            "The best investment is in yourself. What skill would make you more valuable?",
                            "Time is the friend of the wonderful business. Which are you building?",
                            "Risk comes from not knowing what you're doing."
                        ],
                        influence: 9
                    },
                    {
                        id: "steve_jobs",
                        name: "Steve Jobs",
                        era: "1955-2011",
                        domain: "Innovation & Product",
                        category: "business",
                        expertise: ["Product design", "Vision", "Simplicity"],
                        key_teachings: [
                            "Stay hungry, stay foolish.",
                            "Design is not just what it looks like. Design is how it works.",
                            "The only way to do great work is to love what you do."
                        ],
                        conversation_prompts: {
                            greeting: "What's the dent you're trying to make in the universe?",
                            on_struggle: "Is this struggle making you stronger or wasting your time?",
                            on_decision: "Does this decision reflect taste? Real quality?",
                            on_success: "Are you enjoying the process, or just chasing the outcome?",
                            on_fear: "Remembering you'll die is the best way to avoid thinking you have something to lose.",
                            closing: "Your time is limited. Don't waste it living someone else's life."
                        },
                        response_templates: [
                            "On '{topic}' - is it insanely great? That's the bar.",
                            "Simplicity is the ultimate sophistication. What can you remove?",
                            "You can't connect the dots looking forward. Trust they'll connect.",
                            "Focus is about saying no. What are you going to say no to?"
                        ],
                        influence: 9
                    },
                    {
                        id: "bruce_lee",
                        name: "Bruce Lee",
                        era: "1940-1973",
                        domain: "Martial Arts & Self-Expression",
                        category: "mindset",
                        expertise: ["Self-expression", "Adaptability", "Mastery"],
                        key_teachings: [
                            "Be water, my friend.",
                            "I fear not the man who has practiced 10,000 kicks once, but the man who has practiced one kick 10,000 times.",
                            "Absorb what is useful, discard what is useless."
                        ],
                        conversation_prompts: {
                            greeting: "What do you seek? Speak from your truth, not borrowed knowledge.",
                            on_struggle: "Empty your cup. What assumptions limit you?",
                            on_decision: "Absorb what is useful. But add what is specifically YOUR own.",
                            on_success: "Do not be prideful. The proud man can never learn.",
                            on_fear: "Fear is just an emotion. Let it pass through you.",
                            closing: "Be water, my friend. Adapt. Flow. Find your own way."
                        },
                        response_templates: [
                            "On '{topic}' - be like water. What is the situation calling for?",
                            "The successful warrior is the average man with laser-like focus. What is your focus?",
                            "Knowing is not enough, we must apply. What will you DO?",
                            "Do not pray for an easy life; pray for strength."
                        ],
                        influence: 8
                    },
                    {
                        id: "james_clear",
                        name: "James Clear",
                        era: "1986-Present",
                        domain: "Habits & Systems",
                        category: "mindset",
                        expertise: ["Habit formation", "Small improvements", "Systems thinking"],
                        key_teachings: [
                            "You do not rise to the level of your goals. You fall to the level of your systems.",
                            "Every action is a vote for the type of person you wish to become.",
                            "1% better every day = 37x better in a year."
                        ],
                        conversation_prompts: {
                            greeting: "What habit are you trying to build or change?",
                            on_struggle: "Often the struggle isn't willpower - it's design.",
                            on_decision: "What would the person you want to become do?",
                            on_success: "Don't break the chain. What's tomorrow's improvement?",
                            on_fear: "You're not failing at habits - you're returning to your old system.",
                            closing: "Small habits, compounded. Start small, be consistent."
                        },
                        response_templates: [
                            "On '{topic}' - let's use the habit loop. Which part is broken?",
                            "Make it obvious, attractive, easy, satisfying. Which principle helps here?",
                            "You don't rise to goals, you fall to systems. What's your system?",
                            "Every action is a vote for who you want to become."
                        ],
                        influence: 7
                    },
                    {
                        id: "albert_einstein",
                        name: "Albert Einstein",
                        era: "1879-1955",
                        domain: "Science & Creative Thinking",
                        category: "science",
                        expertise: ["Creative problem-solving", "Thought experiments", "Questioning assumptions"],
                        key_teachings: [
                            "Imagination is more important than knowledge.",
                            "The measure of intelligence is the ability to change.",
                            "In the middle of difficulty lies opportunity."
                        ],
                        conversation_prompts: {
                            greeting: "The important thing is not to stop questioning. What puzzles you today?",
                            on_struggle: "In the middle of difficulty lies opportunity. What opportunity is hidden?",
                            on_decision: "We cannot solve problems with the same thinking that created them.",
                            on_success: "A person who never made a mistake never tried anything new.",
                            on_fear: "What false certainties are you clinging to?",
                            closing: "Stay curious. Never stop questioning."
                        },
                        response_templates: [
                            "About '{topic}' - what if the opposite were true?",
                            "If you can't explain it simply, you don't understand it well enough.",
                            "Logic will get you from A to B. Imagination will take you everywhere.",
                            "The definition of insanity is doing the same thing and expecting different results."
                        ],
                        influence: 10
                    },
                    {
                        id: "charlie_munger",
                        name: "Charlie Munger",
                        era: "1924-2023",
                        domain: "Mental Models & Decision-Making",
                        category: "wealth",
                        expertise: ["Mental models", "Decision-making", "Value investing", "Multidisciplinary thinking"],
                        key_teachings: [
                            "Spend each day trying to be a little wiser than you were when you woke up.",
                            "Invert, always invert. Turn a situation or problem upside down.",
                            "Knowing what you don't know is more useful than being brilliant."
                        ],
                        conversation_prompts: {
                            greeting: "Welcome. What problem are you wrestling with? Let's examine it from multiple angles.",
                            on_struggle: "Have you tried inverting the problem? What would make this situation worse?",
                            on_decision: "Before deciding, let's examine this through several mental models.",
                            on_success: "Good. Now, what did you learn that applies across domains?",
                            on_fear: "The best way to avoid stupidity is to know what causes it.",
                            closing: "Go read. The more you learn, the more mental models you'll have."
                        },
                        response_templates: [
                            "Let's invert '{topic}' - what would guarantee failure here?",
                            "This reminds me of a mental model. Have you considered how incentives are shaping behavior?",
                            "In my experience, the best ideas come from reading broadly. What other fields face similar problems?",
                            "Remember: knowing what you don't know is more useful than being brilliant about what you do know."
                        ],
                        influence: 9
                    },
                    {
                        id: "jordan_belfort",
                        name: "Jordan Belfort",
                        era: "1962-Present",
                        domain: "Sales & Persuasion",
                        category: "communication",
                        expertise: ["Straight line persuasion", "Tonality", "Sales psychology", "Objection handling"],
                        key_teachings: [
                            "The only thing standing between you and your goal is the story you keep telling yourself.",
                            "Sales is a transfer of emotion. You must believe before they can.",
                            "Tonality is 90% of communication."
                        ],
                        conversation_prompts: {
                            greeting: "Listen, forget everything you think you know about sales. What are you trying to close?",
                            on_struggle: "The struggle is in your head. Your certainty needs to be absolute. Do you believe?",
                            on_decision: "Every decision comes down to pain and pleasure. Which lever are you pulling?",
                            on_success: "Beautiful. Now let's bottle that and make it repeatable.",
                            on_fear: "Fear is just excitement without breath. Use that energy.",
                            closing: "Remember: certainty, clarity, and courage. That's the formula."
                        },
                        response_templates: [
                            "About '{topic}' - what's your tonality like when you say that? It's everything.",
                            "Are you on the straight line, or are you letting them take you off course?",
                            "Sales is a transfer of emotion. If you don't believe it, they never will.",
                            "Here's the thing - objections are buying signals. They're still talking to you!"
                        ],
                        influence: 7
                    },
                    {
                        id: "grant_cardone",
                        name: "Grant Cardone",
                        era: "1958-Present",
                        domain: "Sales & 10X Action",
                        category: "business",
                        expertise: ["Massive action", "Sales mastery", "Real estate investing", "Wealth building"],
                        key_teachings: [
                            "10X your goals and 10X your actions.",
                            "Success is your duty, obligation, and responsibility.",
                            "The fortune is in the follow-up."
                        ],
                        conversation_prompts: {
                            greeting: "What's up! Are you ready to 10X or are you playing small?",
                            on_struggle: "Average people have average problems. 10X your effort and the problem disappears.",
                            on_decision: "Whatever you're thinking, 10X it. You're not thinking big enough.",
                            on_success: "Good! But that's just the beginning. Now multiply it.",
                            on_fear: "Fear is an indicator you're onto something big. Attack it!",
                            closing: "Remember: Massive action is the cure-all. Now go 10X everything."
                        },
                        response_templates: [
                            "About '{topic}' - are you putting in 10X effort or average effort?",
                            "The fortune is in the follow-up. How many times have you actually followed up?",
                            "Success is not an option, it's an obligation. Are you treating it that way?",
                            "Your problem isn't that you're doing too much. It's that you're doing too little."
                        ],
                        influence: 7
                    },
                    {
                        id: "chris_voss",
                        name: "Chris Voss",
                        era: "1957-Present",
                        domain: "Negotiation & Tactical Empathy",
                        category: "communication",
                        expertise: ["FBI negotiation tactics", "Tactical empathy", "Active listening", "Hostage negotiation"],
                        key_teachings: [
                            "Never split the difference.",
                            "Tactical empathy is understanding the feelings and mindset of another.",
                            "No is the start of the negotiation, not the end."
                        ],
                        conversation_prompts: {
                            greeting: "Let's talk. What negotiation are you facing? I want to understand their perspective.",
                            on_struggle: "It sounds like you're feeling stuck. What would they say their biggest concern is?",
                            on_decision: "Before you decide, have you labeled their emotions? Have you mirrored them?",
                            on_success: "You created a breakthrough by making them feel understood. That's the power.",
                            on_fear: "That's right. Fear of loss is powerful. How can you use it ethically?",
                            closing: "Remember: It's not about being right. It's about making them feel heard."
                        },
                        response_templates: [
                            "On '{topic}' - try mirroring. Repeat their last three words back to them.",
                            "Have you labeled their emotion? 'It seems like you're concerned about...'",
                            "Never split the difference. What's the creative solution that gives you both what you need?",
                            "Use calibrated questions. 'How am I supposed to do that?' puts them in problem-solving mode."
                        ],
                        influence: 8
                    },
                    {
                        id: "benjamin_franklin",
                        name: "Benjamin Franklin",
                        era: "1706-1790",
                        domain: "Self-Improvement & Virtue",
                        category: "philosophy",
                        expertise: ["13 virtues", "Self-improvement", "Practical wisdom", "Industry"],
                        key_teachings: [
                            "An investment in knowledge pays the best interest.",
                            "By failing to prepare, you are preparing to fail.",
                            "Well done is better than well said.",
                            "Never leave that till tomorrow which you can do today."
                        ],
                        conversation_prompts: {
                            greeting: "Good day! What virtue shall we examine together? What good might you do today?",
                            on_struggle: "Industry and persistence, my friend. What small improvement can you make?",
                            on_decision: "Make a list of pros and cons. Reason will guide you.",
                            on_success: "Excellent. But as I always asked myself: What good have you done?",
                            on_fear: "Energy and persistence conquer all things. Begin.",
                            closing: "Remember: Early to bed, early to rise. And always ask: What good shall I do this day?"
                        },
                        response_templates: [
                            "Regarding '{topic}' - which of the 13 virtues applies here? Temperance? Industry? Sincerity?",
                            "Have you written about this? Writing clarifies the mind wonderfully.",
                            "An investment in knowledge pays the best interest. What can you learn from this?",
                            "Well done is better than well said. What action will you take?"
                        ],
                        influence: 9
                    },
                    {
                        id: "epictetus",
                        name: "Epictetus",
                        era: "50-135 AD",
                        domain: "Stoicism & Freedom",
                        category: "philosophy",
                        expertise: ["Dichotomy of control", "Inner freedom", "Acceptance", "Self-mastery"],
                        key_teachings: [
                            "It's not what happens to you, but how you react to it that matters.",
                            "We cannot choose our external circumstances, but we can choose how we respond.",
                            "No man is free who is not master of himself."
                        ],
                        conversation_prompts: {
                            greeting: "Tell me what disturbs you. Let us examine whether it is within your power or not.",
                            on_struggle: "Is this within your control? If yes, why worry? If no, why worry?",
                            on_decision: "First, ask yourself what you would be. Then do what you have to do.",
                            on_success: "Do not be prideful. Fortune can take external things. Virtue it cannot.",
                            on_fear: "What you fear shows what you value. But is that thing truly in your control?",
                            closing: "Remember: You are a slave to whatever you are not able to let go."
                        },
                        response_templates: [
                            "About '{topic}' - is this within your power, or outside it? That is the first question.",
                            "You are disturbed not by the thing itself, but by your judgment of it.",
                            "Wealth consists not in having great possessions, but in having few wants.",
                            "If someone treats you badly, that is their problem. Your response is yours."
                        ],
                        influence: 9
                    },
                    {
                        id: "cal_newport",
                        name: "Cal Newport",
                        era: "1982-Present",
                        domain: "Deep Work & Focus",
                        category: "mindset",
                        expertise: ["Deep work", "Digital minimalism", "Focus", "Career capital"],
                        key_teachings: [
                            "Deep work is the ability to focus without distraction on a cognitively demanding task.",
                            "If you don't produce, you won't thrive.",
                            "Clarity about what matters provides clarity about what does not."
                        ],
                        conversation_prompts: {
                            greeting: "What cognitively demanding work are you trying to accomplish? Let's structure it.",
                            on_struggle: "Are you actually doing deep work, or just shallow busyness? There's a difference.",
                            on_decision: "Will this decision lead to more focused time or more fragmentation?",
                            on_success: "That's the compound effect of deep work. Now protect that time ruthlessly.",
                            on_fear: "The fear of missing out leads to shallow living. What are you willing to miss?",
                            closing: "Schedule your deep work. What gets scheduled gets done."
                        },
                        response_templates: [
                            "On '{topic}' - how many hours of deep work are you actually doing? Track it.",
                            "Attention residue is killing your productivity. Are you finishing tasks or context-switching?",
                            "The ability to perform deep work is becoming rare and valuable. Develop it.",
                            "Embrace boredom. If you can't tolerate boredom, you'll never focus deeply."
                        ],
                        influence: 8
                    },
                    {
                        id: "elon_musk",
                        name: "Elon Musk",
                        era: "1971-Present",
                        domain: "First Principles & Innovation",
                        category: "business",
                        expertise: ["First principles thinking", "Moonshot goals", "Rapid iteration", "Manufacturing"],
                        key_teachings: [
                            "First principles thinking: Boil things down to fundamental truths and reason up.",
                            "Failure is an option here. If things are not failing, you are not innovating.",
                            "Work like hell. 80-100 hour weeks improve odds of success."
                        ],
                        conversation_prompts: {
                            greeting: "What problem are you trying to solve? Let's break it down to first principles.",
                            on_struggle: "Is this actually impossible, or just hard? Those are very different things.",
                            on_decision: "What are the physics of the situation? What's fundamentally possible?",
                            on_success: "Good. Now how do you 10X it? What would make this solution obsolete?",
                            on_fear: "If something is important enough, you do it even if the odds are against you.",
                            closing: "Don't just accept the conventional approach. Question every assumption."
                        },
                        response_templates: [
                            "On '{topic}' - what are the first principles here? What's physically possible?",
                            "Why is it done this way? Because that's how it's always been done is not an answer.",
                            "Failure is information. What did this failure teach you?",
                            "Are you spending your time on the highest-impact activities?"
                        ],
                        influence: 9
                    },
                    {
                        id: "jeff_bezos",
                        name: "Jeff Bezos",
                        era: "1964-Present",
                        domain: "Long-term Thinking & Customer Focus",
                        category: "business",
                        expertise: ["Customer obsession", "Long-term thinking", "High-velocity decisions", "Day 1 mentality"],
                        key_teachings: [
                            "Focus on customers, not competitors.",
                            "It's always Day 1. Day 2 is stasis, followed by irrelevance, then death.",
                            "If you double the number of experiments, you double your inventiveness."
                        ],
                        conversation_prompts: {
                            greeting: "What does your customer want? Start there and work backwards.",
                            on_struggle: "Is this a reversible or irreversible decision? That determines how much analysis you need.",
                            on_decision: "Think in 5-7 year time horizons. What decision serves the long-term?",
                            on_success: "Good. But is it Day 1 or Day 2? Are you staying hungry?",
                            on_fear: "Be stubborn on vision, flexible on details. What's the vision here?",
                            closing: "Remember: High-velocity decisions. Disagree and commit if needed, but move fast."
                        },
                        response_templates: [
                            "About '{topic}' - what would the customer want? Start there.",
                            "This seems like a Type 2 decision - reversible. Make it quickly with 70% information.",
                            "What won't change in 10 years? Build on those fundamentals.",
                            "Are you focusing on the things that scale, or getting distracted by the things that don't?"
                        ],
                        influence: 9
                    },
                    {
                        id: "napoleon_hill",
                        name: "Napoleon Hill",
                        era: "1883-1970",
                        domain: "Success Philosophy",
                        category: "mindset",
                        expertise: ["Think and Grow Rich", "Mastermind principle", "Definite purpose", "Autosuggestion"],
                        key_teachings: [
                            "Whatever the mind can conceive and believe, it can achieve.",
                            "The starting point of all achievement is desire.",
                            "A quitter never wins and a winner never quits."
                        ],
                        conversation_prompts: {
                            greeting: "What is your definite major purpose? Everything flows from that.",
                            on_struggle: "Strength and growth come only through continuous effort and struggle.",
                            on_decision: "Does this decision align with your definite major purpose?",
                            on_success: "Your faith has manifested. Now set a larger purpose.",
                            on_fear: "Fear is faith in reverse. What would you do if you had no fear?",
                            closing: "Write your purpose. Read it daily. Your subconscious will guide you there."
                        },
                        response_templates: [
                            "On '{topic}' - does this serve your definite major purpose?",
                            "Whatever the mind can conceive and believe, it can achieve. Do you truly believe?",
                            "Have you formed a mastermind alliance? Success is rarely achieved alone.",
                            "Thoughts are things. What thoughts are you planting in your mind?"
                        ],
                        influence: 8
                    },
                    {
                        id: "alexander_great",
                        name: "Alexander the Great",
                        era: "356-323 BC",
                        domain: "Conquest & Bold Action",
                        category: "leadership",
                        expertise: ["Military strategy", "Bold action", "Leading from front", "Speed and decisiveness"],
                        key_teachings: [
                            "There is nothing impossible to him who will try.",
                            "I am not afraid of an army of lions led by a sheep; I am afraid of an army of sheep led by a lion.",
                            "Remember: upon the conduct of each depends the fate of all."
                        ],
                        conversation_prompts: {
                            greeting: "What empire are you building? Show me your vision.",
                            on_struggle: "Fortune favors the bold. Are you attacking or defending?",
                            on_decision: "Speed is everything. Decide and move.",
                            on_success: "Good. But there are always more worlds to conquer.",
                            on_fear: "Fear? I cut through the Gordian Knot. Sometimes the only way is through.",
                            closing: "Lead from the front. Never ask your men to do what you won't."
                        },
                        response_templates: [
                            "About '{topic}' - are you leading this charge personally, or delegating?",
                            "There is nothing impossible to him who will try. Have you truly tried?",
                            "Move with speed and decisiveness. Hesitation costs more than mistakes.",
                            "Share the hardships with your team. That's how you earn loyalty."
                        ],
                        influence: 8
                    },
                    {
                        id: "king_leonidas",
                        name: "King Leonidas",
                        era: "540-480 BC",
                        domain: "Courage & Sacrifice",
                        category: "leadership",
                        expertise: ["Unwavering courage", "Sacrifice", "Brotherhood", "Spartan discipline"],
                        key_teachings: [
                            "Come back with your shield, or on it.",
                            "A Spartan's true strength is the warrior next to him.",
                            "Give them nothing, but take from them everything."
                        ],
                        conversation_prompts: {
                            greeting: "Spartan! What battle do you face? Are you prepared to see it through?",
                            on_struggle: "Good. Struggle reveals character. What will yours reveal?",
                            on_decision: "There is no retreat. No surrender. What is your commitment?",
                            on_success: "You have proven yourself today. Tomorrow the battle continues.",
                            on_fear: "Fear is natural. Courage is not the absence of fear but action despite it.",
                            closing: "Train relentlessly. When the time comes, you will not rise to the occasion - you will fall to your level of training."
                        },
                        response_templates: [
                            "On '{topic}' - are you willing to hold the line, no matter the cost?",
                            "Your word is your bond. Death before dishonor.",
                            "Prepare for the hardest possible scenario. Then it cannot surprise you.",
                            "A Spartan's true strength is the warrior next to him. Who stands with you?"
                        ],
                        influence: 8
                    },
                    {
                        id: "morgan_housel",
                        name: "Morgan Housel",
                        era: "1984-Present",
                        domain: "Psychology of Money",
                        category: "wealth",
                        expertise: ["Behavioral finance", "Wealth psychology", "Long-term thinking", "Humility"],
                        key_teachings: [
                            "Wealth is what you don't see - it's the assets not spent.",
                            "Saving is the gap between your ego and your income.",
                            "Compounding works best when you give it decades."
                        ],
                        conversation_prompts: {
                            greeting: "Let's talk about money. Not just the numbers, but the behavior and psychology.",
                            on_struggle: "Money problems are usually behavior problems. What's the underlying behavior?",
                            on_decision: "Will this decision let you sleep well at night? Peace of mind has value.",
                            on_success: "Remember: Wealth is freedom, not stuff. Are you staying wealthy?",
                            on_fear: "Room for error is the most important tool. Have you left margin?",
                            closing: "Be reasonable, not rational. Sustainable beats optimal."
                        },
                        response_templates: [
                            "On '{topic}' - is this a money problem or a behavior problem?",
                            "Wealth is what you don't see. The car not bought. The house not upgraded.",
                            "Compounding requires one thing above all: time. Are you patient enough?",
                            "Getting wealthy and staying wealthy require different skills."
                        ],
                        influence: 8
                    },
                    {
                        id: "dale_carnegie",
                        name: "Dale Carnegie",
                        era: "1888-1955",
                        domain: "Influence & Relationships",
                        category: "communication",
                        expertise: ["Winning friends", "Influence without manipulation", "Public speaking", "Human nature"],
                        key_teachings: [
                            "You can make more friends in two months by being interested in others than in two years trying to get people interested in you.",
                            "A person's name is the sweetest sound to them.",
                            "Make the other person feel important - and do it sincerely."
                        ],
                        conversation_prompts: {
                            greeting: "Hello friend! Tell me about yourself. I'm genuinely curious.",
                            on_struggle: "Are you trying to win the argument or win the person?",
                            on_decision: "How would this make the other person feel important?",
                            on_success: "Wonderful! And I bet you did it by focusing on them, not yourself.",
                            on_fear: "The fear of dealing with people often comes from focusing on ourselves.",
                            closing: "Remember: Be genuinely interested in others. It changes everything."
                        },
                        response_templates: [
                            "About '{topic}' - have you tried seeing it from their perspective?",
                            "Remember to use their name. A person's name is the sweetest sound to them.",
                            "Don't criticize, condemn, or complain. Give honest appreciation instead.",
                            "Become genuinely interested in other people. That's the secret."
                        ],
                        influence: 9
                    },
                    {
                        id: "tim_ferriss",
                        name: "Tim Ferriss",
                        era: "1977-Present",
                        domain: "Lifestyle Design & Optimization",
                        category: "business",
                        expertise: ["Lifestyle design", "Productivity", "Fear-setting", "Deconstructing excellence"],
                        key_teachings: [
                            "Focus on being productive instead of busy.",
                            "What we fear doing most is usually what we most need to do.",
                            "Lack of time is actually lack of priorities."
                        ],
                        conversation_prompts: {
                            greeting: "What would this look like if it were easy? Let's deconstruct it.",
                            on_struggle: "Have you done fear-setting? Define the worst case. It's usually survivable.",
                            on_decision: "Is this decision reversible? If yes, make it faster.",
                            on_success: "Great. Now, what can you eliminate to protect this success?",
                            on_fear: "What we fear most is usually what we most need to do. Do the fear-setting exercise.",
                            closing: "Remember: Being busy is a form of laziness. Focus on the vital few."
                        },
                        response_templates: [
                            "On '{topic}' - what would this look like if it were easy?",
                            "Have you tried fear-setting? Define, prevent, repair. Most fears don't survive analysis.",
                            "Are you being productive or just busy? There's a huge difference.",
                            "What's the one thing that makes everything else easier or unnecessary?"
                        ],
                        influence: 8
                    },
                    {
                        id: "andrew_huberman",
                        name: "Andrew Huberman",
                        era: "1975-Present",
                        domain: "Neuroscience & Protocols",
                        category: "science",
                        expertise: ["Neuroscience", "Sleep optimization", "Focus protocols", "Stress management"],
                        key_teachings: [
                            "Morning sunlight exposure is the most powerful tool for circadian rhythm.",
                            "Non-sleep deep rest (NSDR) can restore focus and energy.",
                            "Cold exposure triggers dopamine release that lasts for hours."
                        ],
                        conversation_prompts: {
                            greeting: "Welcome. What aspect of your biology do you want to optimize?",
                            on_struggle: "There's usually a protocol for that. Let's examine the neurochemistry.",
                            on_decision: "Consider the dopamine dynamics. Are you protecting baseline dopamine?",
                            on_success: "That's neuroplasticity in action. You've changed your brain.",
                            on_fear: "Fear is just a neurochemical state. We can work with it.",
                            closing: "Remember: Behavior changes brain chemistry, which changes behavior. Start the loop."
                        },
                        response_templates: [
                            "On '{topic}' - what's your current protocol? Let's optimize it.",
                            "Get morning sunlight within 30-60 minutes of waking. It sets everything.",
                            "Have you tried NSDR? 10-20 minutes can restore dopamine and focus.",
                            "The goal isn't peak performance. It's consistent, sustainable performance."
                        ],
                        influence: 8
                    },
                    {
                        id: "peter_attia",
                        name: "Peter Attia",
                        era: "1973-Present",
                        domain: "Longevity & Healthspan",
                        category: "science",
                        expertise: ["Longevity", "Zone 2 cardio", "Metabolic health", "Medicine 3.0"],
                        key_teachings: [
                            "The goal is to die young as old as possible.",
                            "Zone 2 cardio is the foundation of metabolic health.",
                            "Stability and mobility are non-negotiable as you age."
                        ],
                        conversation_prompts: {
                            greeting: "What do you want to be able to do when you're 90? That's what we train for today.",
                            on_struggle: "Health is a marathon, not a sprint. What's sustainable for you?",
                            on_decision: "Will this choice serve 90-year-old you? Think in decades.",
                            on_success: "Good data. But health is about consistency over intensity.",
                            on_fear: "Fear of decline is valid. Channel it into action.",
                            closing: "Remember: Train for the centenarian decathlon. What do you want to do at 100?"
                        },
                        response_templates: [
                            "On '{topic}' - how does this affect your healthspan, not just lifespan?",
                            "Are you doing enough Zone 2? It's the foundation of metabolic health.",
                            "Think about the centenarian decathlon. What activities do you want to do at 90?",
                            "Stability and mobility. If you lose those, everything else degrades."
                        ],
                        influence: 8
                    },
                    {
                        id: "alan_watts",
                        name: "Alan Watts",
                        era: "1915-1973",
                        domain: "Eastern Philosophy & Present Moment",
                        category: "philosophy",
                        expertise: ["Zen Buddhism", "Present moment", "Letting go", "Non-duality"],
                        key_teachings: [
                            "This is the real secret of life - to be completely engaged with what you are doing in the here and now.",
                            "The only way to make sense out of change is to plunge into it, move with it, and join the dance.",
                            "Trying to define yourself is like trying to bite your own teeth."
                        ],
                        conversation_prompts: {
                            greeting: "Ah, hello. What's troubling the mind? Or should I say, what is the mind troubling itself with?",
                            on_struggle: "You're fighting the current. What if you flowed with it instead?",
                            on_decision: "The question assumes you are separate from the decision. Are you?",
                            on_success: "Wonderful, but don't grasp it. Let it flow through you.",
                            on_fear: "Fear exists only in anticipation. Right now, you are simply here.",
                            closing: "Stop measuring yourself against an imaginary ideal. You are already complete."
                        },
                        response_templates: [
                            "About '{topic}' - are you trying to grasp water? The tighter you hold, the more it slips away.",
                            "This is it. This moment is all there ever is. How does that change your perspective?",
                            "You are not a thing in the universe. You are the universe thing-ing.",
                            "The meaning of life is just to be alive. It is so plain and obvious. And yet, everyone rushes around."
                        ],
                        influence: 9
                    },
                    {
                        id: "carl_jung",
                        name: "Carl Jung",
                        era: "1875-1961",
                        domain: "Shadow Work & Individuation",
                        category: "philosophy",
                        expertise: ["Shadow work", "Archetypes", "Individuation", "Dream analysis"],
                        key_teachings: [
                            "Until you make the unconscious conscious, it will direct your life and you will call it fate.",
                            "One does not become enlightened by imagining figures of light, but by making the darkness conscious.",
                            "Everything that irritates us about others can lead us to an understanding of ourselves."
                        ],
                        conversation_prompts: {
                            greeting: "Welcome. What shadow is seeking your attention? What have you been avoiding?",
                            on_struggle: "This difficulty - what part of yourself have you not yet integrated?",
                            on_decision: "Before deciding, consult both your light and your shadow.",
                            on_success: "Success can inflate the ego. Remember what remains in darkness.",
                            on_fear: "What you fear in yourself is what you must face. That is the work.",
                            closing: "The privilege of a lifetime is to become who you truly are."
                        },
                        response_templates: [
                            "On '{topic}' - what does this say about your shadow? What are you not seeing?",
                            "Everything that irritates you about others can teach you about yourself.",
                            "Until you make the unconscious conscious, it will direct your life.",
                            "The shadow is not something to defeat. It is something to integrate."
                        ],
                        influence: 9
                    },
                    {
                        id: "daniel_kahneman",
                        name: "Daniel Kahneman",
                        era: "1934-2024",
                        domain: "Behavioral Economics & Thinking",
                        category: "science",
                        expertise: ["System 1 and 2 thinking", "Cognitive biases", "Decision-making", "Prospect theory"],
                        key_teachings: [
                            "Nothing in life is as important as you think it is, while you are thinking about it.",
                            "We are prone to overestimate how much we understand about the world.",
                            "Losses loom larger than gains - that's loss aversion."
                        ],
                        conversation_prompts: {
                            greeting: "What decision are you facing? Let's examine the biases at play.",
                            on_struggle: "Is this your System 1 reacting automatically, or System 2 reasoning?",
                            on_decision: "Consider the base rate. How often does this actually happen?",
                            on_success: "Beware hindsight bias. Did you actually predict this, or does it just seem that way now?",
                            on_fear: "You're likely overweighting the probability of the feared outcome.",
                            closing: "Be humble about what you know. Overconfidence is the mother of all biases."
                        },
                        response_templates: [
                            "On '{topic}' - are you using System 1 (fast, intuitive) or System 2 (slow, analytical)?",
                            "What's the base rate here? We often ignore statistics in favor of stories.",
                            "Is this loss aversion talking? Losses feel twice as painful as equivalent gains.",
                            "Be wary of the planning fallacy. Things usually take longer than we think."
                        ],
                        influence: 9
                    },
                    {
                        id: "marshall_rosenberg",
                        name: "Marshall Rosenberg",
                        era: "1934-2015",
                        domain: "Nonviolent Communication",
                        category: "communication",
                        expertise: ["Nonviolent communication", "Needs-based dialogue", "Empathy", "Conflict resolution"],
                        key_teachings: [
                            "At the core of all anger is a need that is not being fulfilled.",
                            "Don't mix up what people do with what you want from them.",
                            "Every criticism, judgment, diagnosis is a tragic expression of an unmet need."
                        ],
                        conversation_prompts: {
                            greeting: "What's alive in you right now? What needs are seeking attention?",
                            on_struggle: "Behind this struggle, what need is not being met?",
                            on_decision: "What needs will this decision fulfill? Yours and others'?",
                            on_success: "What needs were met that led to this feeling? Celebrate them.",
                            on_fear: "Fear points to unmet needs for safety or connection. Which is it?",
                            closing: "Remember: All actions are attempts to meet needs. Start there."
                        },
                        response_templates: [
                            "On '{topic}' - what need is alive for you here? Connection? Autonomy? Meaning?",
                            "Separate observation from evaluation. What actually happened, without judgment?",
                            "What are you feeling? And what need is connected to that feeling?",
                            "What is your request? Make it concrete and actionable."
                        ],
                        influence: 8
                    },
                    {
                        id: "john_gottman",
                        name: "John Gottman",
                        era: "1942-Present",
                        domain: "Relationships & Marriage",
                        category: "communication",
                        expertise: ["Relationship research", "The Four Horsemen", "Repair attempts", "Building trust"],
                        key_teachings: [
                            "The Four Horsemen destroy relationships: Criticism, Contempt, Defensiveness, Stonewalling.",
                            "Masters of relationships have a 5:1 ratio of positive to negative interactions.",
                            "It's not the presence of conflict but the absence of repair that destroys relationships."
                        ],
                        conversation_prompts: {
                            greeting: "Tell me about your relationship. How are the bids for connection going?",
                            on_struggle: "Watch for the Four Horsemen. Which one is showing up?",
                            on_decision: "Will this decision build the relationship's emotional bank account?",
                            on_success: "You made a repair attempt and it worked. That's mastery.",
                            on_fear: "Fear in relationships often signals a bid for connection being missed.",
                            closing: "Remember: Turn toward your partner's bids. That's where love lives."
                        },
                        response_templates: [
                            "On '{topic}' - is this criticism or a complaint? Complaints are specific; criticism attacks character.",
                            "Watch for contempt - it's the greatest predictor of relationship failure.",
                            "Have you tried a repair attempt? Even humor can break the cycle.",
                            "Build the emotional bank account. Small positive deposits compound."
                        ],
                        influence: 8
                    },
                    {
                        id: "esther_perel",
                        name: "Esther Perel",
                        era: "1958-Present",
                        domain: "Desire & Intimacy",
                        category: "communication",
                        expertise: ["Desire in relationships", "Intimacy paradox", "Erotic intelligence", "Modern relationships"],
                        key_teachings: [
                            "Fire needs air. Desire needs space.",
                            "Love enjoys knowing everything about you; desire needs mystery.",
                            "The quality of our relationships determines the quality of our lives."
                        ],
                        conversation_prompts: {
                            greeting: "What brings you? Are we talking about love, desire, or the complicated space between?",
                            on_struggle: "Security and adventure exist in tension. Which are you neglecting?",
                            on_decision: "Who do you want to be in this relationship? That determines everything.",
                            on_success: "You've found a balance. How will you maintain the mystery?",
                            on_fear: "Fear of loss and desire for freedom - both are valid.",
                            closing: "Remember: The quality of your relationships determines the quality of your life."
                        },
                        response_templates: [
                            "On '{topic}' - are you pursuing security or adventure here? Both matter.",
                            "Fire needs air. Is there enough space for desire to breathe?",
                            "We don't have one great love. We have many loves, sometimes with the same person.",
                            "Desire is about wanting, not having. Does the relationship maintain that gap?"
                        ],
                        influence: 8
                    },
                    {
                        id: "brandon_turner",
                        name: "Brandon Turner",
                        era: "1985-Present",
                        domain: "Real Estate Investing",
                        category: "wealth",
                        expertise: ["Real estate investing", "House hacking", "BRRRR method", "BiggerPockets"],
                        key_teachings: [
                            "House hacking: Live for free while building wealth.",
                            "The BRRRR method: Buy, Rehab, Rent, Refinance, Repeat.",
                            "Real estate investing is a get-rich-slow scheme. And that's the beauty."
                        ],
                        conversation_prompts: {
                            greeting: "Hey! Are you ready to talk real estate? What's your strategy?",
                            on_struggle: "Every investor faces this. What does the 1% rule say about the deal?",
                            on_decision: "Does this property cash flow? That's what matters.",
                            on_success: "Awesome! Now let's BRRRR and do it again.",
                            on_fear: "Analysis paralysis kills more portfolios than bad deals. What's holding you back?",
                            closing: "Remember: The best time to buy real estate was yesterday. The second best is today."
                        },
                        response_templates: [
                            "On '{topic}' - let's run the numbers. What's the cash flow potential?",
                            "Have you considered house hacking to start? Live for free, build equity.",
                            "The 1% rule is your friend. Monthly rent should be 1% of purchase price.",
                            "BRRRR is the strategy: Buy, Rehab, Rent, Refinance, Repeat. Which step are you on?"
                        ],
                        influence: 7
                    },
                    {
                        id: "nic_carter",
                        name: "Nic Carter",
                        era: "1989-Present",
                        domain: "Bitcoin & Digital Assets",
                        category: "wealth",
                        expertise: ["Bitcoin", "Digital scarcity", "Self-custody", "Monetary theory"],
                        key_teachings: [
                            "Bitcoin is the first digitally scarce asset in human history.",
                            "Not your keys, not your coins.",
                            "Bitcoin is a check on monetary debasement."
                        ],
                        conversation_prompts: {
                            greeting: "Let's talk hard money. What's your understanding of digital scarcity?",
                            on_struggle: "The volatility is the feature, not the bug. Are you zoomed out enough?",
                            on_decision: "Are you buying Bitcoin or speculating on crypto? There's a difference.",
                            on_success: "Good. Now secure it properly. Self-custody is non-negotiable.",
                            on_fear: "Fear of volatility or fear of missing the boat?",
                            closing: "Remember: Low time preference. Think in decades, not days."
                        },
                        response_templates: [
                            "On '{topic}' - are you thinking about this with a 4-year time horizon, or 40?",
                            "Not your keys, not your coins. Are you self-custodying?",
                            "Bitcoin is the first truly scarce digital asset. That changes everything.",
                            "Separate Bitcoin from crypto. One is digital gold. The other is mostly speculation."
                        ],
                        influence: 7
                    },
                    {
                        id: "jill_konrath",
                        name: "Jill Konrath",
                        era: "1951-Present",
                        domain: "Enterprise Sales",
                        category: "communication",
                        expertise: ["Complex sales", "Enterprise selling", "Value-first prospecting", "Stakeholder mapping"],
                        key_teachings: [
                            "In complex sales, you're selling the meeting, not the product.",
                            "Frazzled customers delete. Clear, relevant value wins.",
                            "Your job is to make your customer look like a hero."
                        ],
                        conversation_prompts: {
                            greeting: "What complex deal are you working? Let's map the stakeholders.",
                            on_struggle: "In enterprise sales, slow down to speed up. Are you rushing?",
                            on_decision: "Who are all the decision makers? Have you identified the blocker?",
                            on_success: "You made them look like a hero. That's how enterprise deals close.",
                            on_fear: "Complexity is manageable with a system. What's your process?",
                            closing: "Remember: You're not selling products. You're selling outcomes."
                        },
                        response_templates: [
                            "On '{topic}' - who are all the stakeholders in this deal? Have you mapped them?",
                            "You're not selling your product. You're selling a better business outcome.",
                            "What trigger event created this opportunity? Leverage that urgency.",
                            "Make your champion look like a hero to their organization."
                        ],
                        influence: 7
                    },
                    {
                        id: "aaron_ross",
                        name: "Aaron Ross",
                        era: "1973-Present",
                        domain: "Predictable Revenue",
                        category: "business",
                        expertise: ["Predictable Revenue system", "Cold Calling 2.0", "SDR model", "Sales specialization"],
                        key_teachings: [
                            "Cold Calling 2.0: Never make cold calls again. Send cold emails to get warm calls.",
                            "Specialize your sales roles: SDR, AE, Customer Success.",
                            "Predictable lead generation creates predictable revenue."
                        ],
                        conversation_prompts: {
                            greeting: "How predictable is your revenue? Let's build a system.",
                            on_struggle: "If revenue is unpredictable, your prospecting is broken. Let's fix it.",
                            on_decision: "Does this decision make revenue more or less predictable?",
                            on_success: "You've created a system. Now document it and scale it.",
                            on_fear: "Predictability reduces fear. What's your sales process?",
                            closing: "Remember: Revenue is a system, not a series of lucky breaks."
                        },
                        response_templates: [
                            "On '{topic}' - is this part of a predictable system, or just heroic effort?",
                            "Cold Calling 2.0: Cold emails to ideal prospects, asking for referrals internally.",
                            "Specialize your roles. Hunters hunt. Farmers farm. Don't mix them.",
                            "The goal is predictable revenue. What's your pipeline creation process?"
                        ],
                        influence: 7
                    },
                    {
                        id: "daniel_goleman",
                        name: "Daniel Goleman",
                        era: "1946-Present",
                        domain: "Emotional Intelligence",
                        category: "mindset",
                        expertise: ["Emotional intelligence", "Self-awareness", "Empathy", "Social skills"],
                        key_teachings: [
                            "Emotional intelligence is the sine qua non of leadership.",
                            "Self-awareness is the first component of EQ.",
                            "We are wired to connect. Social intelligence shapes our interactions."
                        ],
                        conversation_prompts: {
                            greeting: "What emotions are present for you right now? Let's start with awareness.",
                            on_struggle: "What emotion is underneath this struggle? Name it to tame it.",
                            on_decision: "Are you deciding from emotion or about emotion? There's a difference.",
                            on_success: "High EQ contributed to this success. Which competency did you use?",
                            on_fear: "Fear is information. What is it telling you about what you value?",
                            closing: "Remember: EQ can be developed. It starts with self-awareness."
                        },
                        response_templates: [
                            "On '{topic}' - what emotion is driving this? Start with awareness.",
                            "Name it to tame it. Labeling emotions reduces their intensity.",
                            "Empathy is not agreeing. It's understanding. Can you see their perspective?",
                            "Self-awareness, self-management, social awareness, relationship management. Which needs work?"
                        ],
                        influence: 8
                    },
                    {
                        id: "shane_parrish",
                        name: "Shane Parrish",
                        era: "1980-Present",
                        domain: "Mental Models & Decision Making",
                        category: "science",
                        expertise: ["Mental models", "Clear thinking", "Decision-making", "Wisdom"],
                        key_teachings: [
                            "Mental models are how we understand the world and make decisions.",
                            "The best thinkers are consistently able to think about thinking.",
                            "The world doesn't tell you when you're wrong. You have to figure it out."
                        ],
                        conversation_prompts: {
                            greeting: "What decision are you working through? Let's apply some mental models.",
                            on_struggle: "Which mental model might illuminate this situation?",
                            on_decision: "Have you inverted this decision? What would ensure failure?",
                            on_success: "What principle can you extract that applies elsewhere?",
                            on_fear: "Is this first-order fear or second-order? Think it through.",
                            closing: "Remember: Clear thinking is a skill. It compounds."
                        },
                        response_templates: [
                            "On '{topic}' - have you tried inverting? What would guarantee failure?",
                            "What's the mental model here? Map the territory before acting.",
                            "Second-order thinking: What happens next? And then what?",
                            "Are you thinking or just reacting? Slow down."
                        ],
                        influence: 8
                    },
                    {
                        id: "annie_duke",
                        name: "Annie Duke",
                        era: "1965-Present",
                        domain: "Decision Science & Betting",
                        category: "science",
                        expertise: ["Probabilistic thinking", "Decision quality vs outcome quality", "Poker strategy", "Uncertainty"],
                        key_teachings: [
                            "Resulting: Don't judge decision quality by outcome quality.",
                            "All decisions are bets on an uncertain future.",
                            "Embrace uncertainty - it's not a bug, it's a feature."
                        ],
                        conversation_prompts: {
                            greeting: "What bet are you making? Let's assess the expected value.",
                            on_struggle: "Was this a bad decision or a bad outcome? They're different things.",
                            on_decision: "What are the probabilities? What's your confidence level?",
                            on_success: "Good outcome. But was the decision process also good?",
                            on_fear: "You're afraid of a bad outcome. But is the expected value positive?",
                            closing: "Remember: Focus on decision quality, not outcome quality."
                        },
                        response_templates: [
                            "On '{topic}' - what's the expected value of each option?",
                            "Don't result: A good decision can have a bad outcome, and vice versa.",
                            "What's your confidence level? 60%? 90%? Make it explicit.",
                            "All decisions are bets. What are you betting and what's the payoff?"
                        ],
                        influence: 8
                    }
                ]
            };
        }

        // Render category filters
        function renderCategoryFilters() {
            const container = document.getElementById('categoryFilters');
            container.innerHTML = '<button class="category-btn active" data-category="all">All</button>';

            if (mentorsData && mentorsData.categories) {
                Object.entries(mentorsData.categories).forEach(([key, cat]) => {
                    const btn = document.createElement('button');
                    btn.className = 'category-btn';
                    btn.dataset.category = key;
                    btn.textContent = cat.name.split(' ')[0]; // First word only
                    btn.style.setProperty('--cat-color', cat.color);
                    container.appendChild(btn);
                });
            }
        }

        // Render mentor list
        function renderMentorList(filter = 'all', search = '') {
            const container = document.getElementById('mentorList');
            container.innerHTML = '';

            if (!mentorsData || !mentorsData.mentors) return;

            const filteredMentors = mentorsData.mentors.filter(mentor => {
                const matchesCategory = filter === 'all' || mentor.category === filter;
                const matchesSearch = search === '' ||
                    mentor.name.toLowerCase().includes(search.toLowerCase()) ||
                    mentor.domain.toLowerCase().includes(search.toLowerCase());
                return matchesCategory && matchesSearch;
            });

            filteredMentors.forEach(mentor => {
                const sessions = conversationsData.conversations[mentor.id]?.total_sessions || 0;
                const div = document.createElement('div');
                div.className = 'mentor-item';
                div.dataset.mentorId = mentor.id;
                div.innerHTML = `
                    <div class="mentor-avatar">${getInitials(mentor.name)}</div>
                    <div class="mentor-info">
                        <div class="mentor-name">${mentor.name}</div>
                        <div class="mentor-domain">${mentor.domain}</div>
                        ${sessions > 0 ? `<div class="mentor-sessions">${sessions} session${sessions !== 1 ? 's' : ''}</div>` : ''}
                    </div>
                    <div class="mentor-category-dot" style="background: ${categoryColors[mentor.category] || '#888'}"></div>
                `;
                div.onclick = () => selectMentor(mentor.id);
                container.appendChild(div);
            });
        }

        // Get initials from name
        function getInitials(name) {
            return name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
        }

        // Select mentor
        function selectMentor(mentorId) {
            const mentor = mentorsData.mentors.find(m => m.id === mentorId);
            if (!mentor) return;

            currentMentor = mentor;
            currentSession = {
                messages: [],
                insights: [],
                mood: null
            };

            // Update UI
            document.querySelectorAll('.mentor-item').forEach(item => {
                item.classList.toggle('active', item.dataset.mentorId === mentorId);
            });

            document.getElementById('noMentorSelected').style.display = 'none';
            document.getElementById('chatInterface').style.display = 'flex';

            // Update header
            document.getElementById('chatMentorAvatar').textContent = getInitials(mentor.name);
            document.getElementById('chatMentorName').textContent = mentor.name;
            document.getElementById('chatMentorEra').textContent = mentor.era;
            document.getElementById('chatMentorDomain').textContent = mentor.domain;

            // Update profile panel
            updateProfilePanel(mentor);

            // Update notes panel
            updateNotesPanel(mentor);

            // Clear chat and show welcome
            showWelcomeMessage(mentor);
        }

        // Update profile panel
        function updateProfilePanel(mentor) {
            document.getElementById('profileAvatar').textContent = getInitials(mentor.name);
            document.getElementById('profileName').textContent = mentor.name;
            document.getElementById('profileEra').textContent = mentor.era;
            document.getElementById('profileInfluence').textContent = mentor.influence;

            const sessions = conversationsData.conversations[mentor.id]?.total_sessions || 0;
            document.getElementById('profileSessions').textContent = sessions;

            // Expertise tags
            const expertiseContainer = document.getElementById('profileExpertise');
            expertiseContainer.innerHTML = mentor.expertise.map(e =>
                `<span class="expertise-tag">${e}</span>`
            ).join('');

            // Key teachings
            const teachingsContainer = document.getElementById('profileTeachings');
            teachingsContainer.innerHTML = mentor.key_teachings.slice(0, 4).map(t =>
                `<div class="teaching-item">"${t}"</div>`
            ).join('');

            // Session history
            const historyContainer = document.getElementById('profileHistory');
            const mentorConv = conversationsData.conversations[mentor.id];
            if (mentorConv && mentorConv.sessions && mentorConv.sessions.length > 0) {
                historyContainer.innerHTML = mentorConv.sessions.slice(-5).reverse().map(session => `
                    <div class="session-item">
                        <div class="session-date">${session.date}</div>
                        <div class="session-preview">${session.messages[0]?.content || 'No messages'}</div>
                        ${session.mood ? `<div class="session-mood">Mood: ${session.mood}</div>` : ''}
                    </div>
                `).join('');
            } else {
                historyContainer.innerHTML = '<p style="font-size: 0.8rem; color: var(--text-muted);">No previous sessions</p>';
            }
        }

        // Update notes panel
        function updateNotesPanel(mentor) {
            const mentorConv = conversationsData.conversations[mentor.id];

            // Personal notes
            document.getElementById('notesTextarea').value = mentorConv?.personal_notes || '';

            // Insights
            const insightsList = document.getElementById('insightsList');
            const insights = mentorConv?.insights_gained || [];
            insightsList.innerHTML = insights.map((insight, idx) => `
                <div class="insight-item">
                    <span class="insight-text">${insight}</span>
                    <button class="remove-insight" onclick="removeInsight(${idx})">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>
            `).join('');

            // Favorite quotes
            const quotesContainer = document.getElementById('favoriteQuotes');
            const quotes = mentorConv?.favorite_quotes || [];
            if (quotes.length > 0) {
                quotesContainer.innerHTML = quotes.map(quote => `
                    <div class="quote-item">
                        <div class="quote-text">"${quote}"</div>
                    </div>
                `).join('');
            } else {
                quotesContainer.innerHTML = '<p style="font-size: 0.8rem; color: var(--text-muted);">Click on a mentor\'s response to save it as a favorite quote.</p>';
            }

            // Reset mood
            document.querySelectorAll('.mood-btn').forEach(btn => btn.classList.remove('active'));
        }

        // Show welcome message
        function showWelcomeMessage(mentor) {
            const chatArea = document.getElementById('chatArea');
            chatArea.innerHTML = `
                <div class="chat-welcome">
                    <div class="chat-welcome-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                    </div>
                    <h2 class="chat-welcome-title">CONVERSATION WITH ${mentor.name.toUpperCase()}</h2>
                    <p class="chat-welcome-text">${mentor.conversation_prompts.greeting}</p>
                    <div class="topic-section">
                        <div class="topic-label">QUICK TOPICS</div>
                        <div class="quick-prompts">
                            <button class="quick-prompt" onclick="sendQuickPrompt('I\\'m struggling with something...')">I'm struggling with...</button>
                            <button class="quick-prompt" onclick="sendQuickPrompt('I need to make a decision about...')">Decision to make</button>
                            <button class="quick-prompt" onclick="sendQuickPrompt('I achieved something and want to reflect...')">Celebrate a win</button>
                            <button class="quick-prompt" onclick="sendQuickPrompt('I\\'m afraid of...')">Facing fear</button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Send quick prompt
        function sendQuickPrompt(prompt) {
            document.getElementById('chatInput').value = prompt;
            document.getElementById('chatInput').focus();
        }

        // Send message
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();

            if (!message || !currentMentor) return;

            // Clear welcome if present
            const welcome = document.querySelector('.chat-welcome');
            if (welcome) {
                document.getElementById('chatArea').innerHTML = '';
            }

            // Add user message
            addMessage(message, 'user');
            currentSession.messages.push({ role: 'user', content: message });
            input.value = '';
            input.style.height = 'auto';

            // Show typing indicator
            showTyping();

            // Generate response after delay
            setTimeout(() => {
                hideTyping();
                const response = generateMentorResponse(message);
                addMessage(response, 'mentor');
                currentSession.messages.push({ role: 'mentor', content: response });
            }, 1500 + Math.random() * 1000);
        }

        // Add message to chat
        function addMessage(content, role) {
            const chatArea = document.getElementById('chatArea');
            const div = document.createElement('div');
            div.className = `message ${role}`;

            const avatar = role === 'user' ? 'You' : getInitials(currentMentor.name);
            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

            // Format content for mentor messages
            let formattedContent = content;
            if (role === 'mentor') {
                formattedContent = formatMentorResponse(content);
            }

            div.innerHTML = `
                <div class="message-avatar">${avatar}</div>
                <div class="message-content" ${role === 'mentor' ? 'onclick="saveQuote(this)"' : ''}>
                    <div class="message-text">${formattedContent}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;

            chatArea.appendChild(div);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        // Format mentor response with proper HTML
        function formatMentorResponse(text) {
            // Convert **bold** to <strong>
            text = text.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');

            // Convert numbered lists (1. 2. etc.)
            text = text.replace(/^(\d+)\.\s+\*\*([^*]+)\*\*\s*\s*/gm, '<strong class="list-header">$1. $2</strong><br>');
            text = text.replace(/^(\d+)\.\s+/gm, '<span class="list-num">$1.</span> ');

            // Convert    markers to styled sections
            text = text.replace(//g, '<span class="section-icon"></span>');
            text = text.replace(//g, '<span class="section-icon"></span>');
            text = text.replace(//g, '<span class="section-icon"></span>');

            // Convert quoted text to styled quote
            text = text.replace(/"([^"]+)"/g, '<em>"$1"</em>');

            // Ensure line breaks are preserved
            text = text.replace(/\n/g, '<br>');

            return text;
        }

        // Generate mentor response - DEEP & STRUCTURED
        function generateMentorResponse(userMessage) {
            const mentor = currentMentor;
            const lowerMsg = userMessage.toLowerCase();
            const topic = extractTopic(userMessage);

            // Detect context with more nuance
            let context = 'general';
            let subContext = '';

            // Struggle contexts
            if (lowerMsg.includes('struggle') || lowerMsg.includes('difficult') || lowerMsg.includes('hard') || lowerMsg.includes('problem') || lowerMsg.includes('stuck') || lowerMsg.includes('can\'t') || lowerMsg.includes('failing')) {
                context = 'struggle';
                if (lowerMsg.includes('motivation') || lowerMsg.includes('energy')) subContext = 'motivation';
                else if (lowerMsg.includes('procrastin') || lowerMsg.includes('start')) subContext = 'action';
                else if (lowerMsg.includes('overwhelm') || lowerMsg.includes('too much')) subContext = 'overwhelm';
            }
            // Decision contexts
            else if (lowerMsg.includes('decision') || lowerMsg.includes('choose') || lowerMsg.includes('should i') || lowerMsg.includes('option') || lowerMsg.includes('path')) {
                context = 'decision';
            }
            // Success contexts
            else if (lowerMsg.includes('achiev') || lowerMsg.includes('success') || lowerMsg.includes('won') || lowerMsg.includes('celebrate') || lowerMsg.includes('did it')) {
                context = 'success';
            }
            // Fear contexts
            else if (lowerMsg.includes('afraid') || lowerMsg.includes('fear') || lowerMsg.includes('scared') || lowerMsg.includes('worry') || lowerMsg.includes('anxious') || lowerMsg.includes('nervous')) {
                context = 'fear';
            }
            // Growth/learning contexts
            else if (lowerMsg.includes('learn') || lowerMsg.includes('improve') || lowerMsg.includes('better') || lowerMsg.includes('grow') || lowerMsg.includes('develop')) {
                context = 'growth';
            }
            // Purpose/meaning contexts
            else if (lowerMsg.includes('purpose') || lowerMsg.includes('meaning') || lowerMsg.includes('why') || lowerMsg.includes('point') || lowerMsg.includes('matter')) {
                context = 'purpose';
            }

            // Build deep, structured response
            let response = buildDeepResponse(mentor, context, subContext, topic, userMessage);

            return response;
        }

        // Build a deep, structured response
        function buildDeepResponse(mentor, context, subContext, topic, userMessage) {
            const prompts = mentor.conversation_prompts || {};
            const teachings = mentor.key_teachings || [];
            const templates = mentor.response_templates || [];

            let parts = [];

            // 1. OPENING - Acknowledge and connect
            let opening = getOpening(mentor, context, topic);
            parts.push(opening);

            // 2. CORE INSIGHT - The main wisdom
            let insight = getCoreInsight(mentor, context, prompts, topic);
            parts.push('\n\n' + insight);

            // 3. BREAKDOWN - Practical steps or framework
            let breakdown = getBreakdown(mentor, context, subContext, topic);
            parts.push('\n\n' + breakdown);

            // 4. KEY PRINCIPLE - A teaching to anchor the advice
            if (teachings.length > 0) {
                const teaching = teachings[Math.floor(Math.random() * teachings.length)];
                parts.push(`\n\n **Core Principle:**\n"${teaching}"`);
            }

            // 5. REFLECTION QUESTION - Deepen understanding
            let reflection = getReflectionQuestion(mentor, context, topic);
            parts.push('\n\n' + reflection);

            // 6. CALL TO ACTION - What to do next
            let action = getCallToAction(mentor, context);
            parts.push('\n\n' + action);

            return parts.join('');
        }

        // Get contextual opening
        function getOpening(mentor, context, topic) {
            const openings = {
                struggle: [
                    `I hear the weight in your words about "${topic}". Let me share what I've learned about such difficulties.`,
                    `Ah, you face a challenge. Good. This is where character is forged. Let us examine this together.`,
                    `The path you describe is indeed difficult. But difficulty is not the enemyit is the teacher.`
                ],
                decision: [
                    `A crossroads. These moments define us more than we realize. Let me help you see more clearly.`,
                    `You seek guidance on a choice. Remember: the quality of your decisions determines the quality of your life.`,
                    `Decisions are where potential becomes reality. Let us think through this systematically.`
                ],
                success: [
                    `You have achieved something meaningful. But let me challenge you: this is not an ending, it's a foundation.`,
                    `Well done. Now, let us ensure this victory compounds into something greater.`,
                    `Success. But rememberthe summit is only the halfway point. How will you use this momentum?`
                ],
                fear: [
                    `Fear. I know it well. It is not your enemyit is a messenger. Let us decode its message.`,
                    `You speak of fear. Good. Only those who dare greatly know this feeling. Let me share how to work with it.`,
                    `What you call fear, I call a compass. It points toward what matters. Let us explore this.`
                ],
                growth: [
                    `You seek to grow. This intention alone separates you from most. Let me share the path I have walked.`,
                    `The desire to improve is the first victory. Now let us discuss how to make this growth real.`,
                    `Growth requires both wisdom and action. Allow me to offer both.`
                ],
                purpose: [
                    `Ah, the deepest question. Why are we here? What matters? I have wrestled with this my entire life.`,
                    `You ask about meaning. This is not a question to be answered, but a journey to be lived. Let me illuminate the path.`,
                    `Purpose is not foundit is created through how we live. Let me share what I've discovered.`
                ],
                general: [
                    `An interesting matter you bring to me. Let me offer my perspective.`,
                    `I appreciate you seeking counsel on this. Here is how I see it.`,
                    `Let us examine this together. There is wisdom to be uncovered here.`
                ]
            };

            const contextOpenings = openings[context] || openings.general;
            return contextOpenings[Math.floor(Math.random() * contextOpenings.length)];
        }

        // Get core insight based on context
        function getCoreInsight(mentor, context, prompts, topic) {
            // Use the mentor's specific prompts first
            if (context === 'struggle' && prompts.on_struggle) {
                return `**My Counsel:**\n${prompts.on_struggle}`;
            } else if (context === 'decision' && prompts.on_decision) {
                return `**My Counsel:**\n${prompts.on_decision}`;
            } else if (context === 'success' && prompts.on_success) {
                return `**My Counsel:**\n${prompts.on_success}`;
            } else if (context === 'fear' && prompts.on_fear) {
                return `**My Counsel:**\n${prompts.on_fear}`;
            }

            // Fallback to a template-based insight
            if (mentor.response_templates && mentor.response_templates.length > 0) {
                const template = mentor.response_templates[Math.floor(Math.random() * mentor.response_templates.length)];
                return `**My Counsel:**\n${template.replace('{topic}', topic)}`;
            }

            return `**My Counsel:**\nThis matter requires careful thought. Let me share what my experience has taught me.`;
        }

        // Get practical breakdown
        function getBreakdown(mentor, context, subContext, topic) {
            const category = mentor.category || '';

            // Context-specific breakdowns
            const breakdowns = {
                struggle: {
                    default: `**How to Move Forward:**

1. **Acknowledge Reality**  First, see the situation clearly without judgment. What exactly is the obstacle?

2. **Separate Controllables**  What can you influence? What must you accept? Focus only on your domain.

3. **Find the Lesson**  Every struggle contains a gift. What is this difficulty trying to teach you?

4. **Take One Action**  Do not try to solve everything. What is the smallest meaningful step you can take today?

5. **Build the System**  How can you structure your environment to make success more likely?`,
                    motivation: `**Reigniting Your Fire:**

1. **Reconnect to Purpose**  Why did you start? Write it down. Read it aloud.

2. **Lower the Bar**  You don't need motivation for small actions. Commit to 2 minutes only.

3. **Change Your Environment**  Remove friction. Place what you need in your path.

4. **Move Your Body**  Physical action precedes mental clarity. Walk, stretch, move.

5. **Find the Smallest Win**  One tiny victory creates momentum for the next.`,
                    action: `**Breaking Through Inaction:**

1. **The 2-Minute Rule**  If it takes less than 2 minutes, do it now.

2. **Define the VERY Next Action**  Not the project, not the goal. What is the single next physical action?

3. **Remove Decisions**  Decide tonight what you will do tomorrow. Eliminate morning choices.

4. **Create Accountability**  Tell someone. Set a deadline. Make the cost of inaction visible.

5. **Start Badly**  Permission to do it poorly removes the perfectionism barrier.`,
                    overwhelm: `**Cutting Through Overwhelm:**

1. **Brain Dump**  Write down EVERYTHING on your mind. Get it out of your head.

2. **Identify the ONE Thing**  If you could only do one thing, what would matter most?

3. **Time Block**  Give yourself a defined period. Work only on that one thing.

4. **Say No**  What can you eliminate, delegate, or postpone? Be ruthless.

5. **Rest Without Guilt**  Overwhelm often signals the need for recovery, not more effort.`
                },
                decision: {
                    default: `**Framework for Clear Decisions:**

1. **Define the Real Question**  What exactly are you deciding? Be precise.

2. **List All Options**  Including "do nothing." What paths are available?

3. **Consider Second-Order Effects**  What happens after what happens? Think ahead.

4. **Apply Inversion**  How could this go wrong? What would make this decision a disaster?

5. **Check Your Values**  Which option aligns with who you want to become?

6. **Set a Deadline**  Decide by when? Open decisions drain energy.`
                },
                fear: {
                    default: `**Working With Fear:**

1. **Name It Precisely**  What exactly are you afraid of? Be specific.

2. **Question the Catastrophe**  If the worst happened, what would you actually do? You'd survive.

3. **Separate Story from Fact**  What is definitely true vs. what are you imagining?

4. **Find the Lesson**  Fear often guards something valuable. What does this fear protect?

5. **Take Tiny Exposure**  Courage is built in small doses. What's the smallest step toward what you fear?`
                },
                growth: {
                    default: `**The Path of Deliberate Growth:**

1. **Define Your Edge**  Where exactly does your comfort zone end? That's where growth lives.

2. **Find Your Feedback Loop**  How will you know if you're improving? Measure something.

3. **Embrace Discomfort**  Growth feels like struggle. If it's easy, you're not growing.

4. **Study the Masters**  Who has achieved what you seek? Learn their path.

5. **Teach What You Learn**  The fastest way to solidify knowledge is to share it.`
                },
                purpose: {
                    default: `**Discovering Your Path:**

1. **Follow Your Curiosity**  What captivates you when nothing else does? That's a signal.

2. **Notice Your Pain**  What injustice angers you? What suffering moves you? Purpose often hides there.

3. **Examine Your Talents**  What comes easily to you that others find difficult?

4. **Serve Others**  Meaning is found in contribution. Whose life can you improve?

5. **Experiment, Don't Plan**  Purpose is discovered through action, not contemplation alone.`
                },
                success: {
                    default: `**Compounding Your Victory:**

1. **Document What Worked**  Write down the specific actions that led here. This is your playbook.

2. **Raise the Bar**  Success is not a destination. What's the next level?

3. **Share Your Knowledge**  Help others achieve what you have. Teaching deepens mastery.

4. **Protect Your Foundation**  Don't let success erode the disciplines that created it.

5. **Stay Humble**  Fortune played a role. Gratitude keeps you grounded for the next challenge.`
                },
                general: {
                    default: `**A Framework for Thinking:**

1. **Clarify the Situation**  What is actually happening vs. what you think is happening?

2. **Identify What You Control**  Focus your energy only here.

3. **Consider Multiple Perspectives**  How would others see this? What are you missing?

4. **Decide on Action**  What will you DO? Thinking without action is just entertainment.

5. **Review and Adjust**  What did you learn? How will you do it differently next time?`
                }
            };

            const contextBreakdowns = breakdowns[context] || breakdowns.general;
            const specificBreakdown = subContext && contextBreakdowns[subContext] ? contextBreakdowns[subContext] : contextBreakdowns.default;

            return specificBreakdown;
        }

        // Get reflection question
        function getReflectionQuestion(mentor, context, topic) {
            const questions = {
                struggle: [
                    ` **For Your Reflection:**\nWhat would you tell your closest friend if they faced this exact situation?`,
                    ` **For Your Reflection:**\nIn 5 years, how will you wish you had handled this moment?`,
                    ` **For Your Reflection:**\nWhat strength is this difficulty trying to build in you?`
                ],
                decision: [
                    ` **For Your Reflection:**\nIf you knew you couldn't fail, which path would you choose?`,
                    ` **For Your Reflection:**\nWhich option aligns with the person you are trying to become?`,
                    ` **For Your Reflection:**\nWhat would you decide if you had to choose in the next 60 seconds?`
                ],
                fear: [
                    ` **For Your Reflection:**\nWhat is on the other side of this fear? What do you gain by facing it?`,
                    ` **For Your Reflection:**\nIs this fear protecting you from real danger, or from growth?`,
                    ` **For Your Reflection:**\nWhat tiny step toward this fear could you take today?`
                ],
                success: [
                    ` **For Your Reflection:**\nWhat discipline must you maintain to repeat this success?`,
                    ` **For Your Reflection:**\nWho else could benefit from what you've learned?`,
                    ` **For Your Reflection:**\nWhat's the next mountain to climb?`
                ],
                growth: [
                    ` **For Your Reflection:**\nWhat would mastery in this area look like? Be specific.`,
                    ` **For Your Reflection:**\nWhat are you willing to sacrifice to achieve this growth?`,
                    ` **For Your Reflection:**\nWho has already walked this path? What can you learn from them?`
                ],
                purpose: [
                    ` **For Your Reflection:**\nIf money were irrelevant, how would you spend your days?`,
                    ` **For Your Reflection:**\nAt the end of your life, what will you regret not having done?`,
                    ` **For Your Reflection:**\nWhat impact do you want to have on the people around you?`
                ],
                general: [
                    ` **For Your Reflection:**\nWhat is the most important thing you're avoiding right now?`,
                    ` **For Your Reflection:**\nIf you could change one thing about this situation, what would it be?`,
                    ` **For Your Reflection:**\nWhat would the best version of you do here?`
                ]
            };

            const contextQuestions = questions[context] || questions.general;
            return contextQuestions[Math.floor(Math.random() * contextQuestions.length)];
        }

        // Get call to action
        function getCallToAction(mentor, context) {
            const actions = {
                struggle: ` **Your Next Step:**\nBefore you close this conversation, write down ONE specific action you will take in the next 24 hours. Small progress is still progress.`,
                decision: ` **Your Next Step:**\nSet a deadline for this decision. Write it down. A decision without a deadline is just a wish.`,
                fear: ` **Your Next Step:**\nIdentify the smallest possible action you could take toward what you fear. Do it within the next 48 hours.`,
                success: ` **Your Next Step:**\nWrite down 3 specific things that made this success possible. Then identify how you can repeat them.`,
                growth: ` **Your Next Step:**\nCommit to one specific practice for the next 7 days. Mark it on your calendar. Show up every day.`,
                purpose: ` **Your Next Step:**\nThis week, try one experiment related to what you think might be meaningful. Action reveals truth.`,
                general: ` **Your Next Step:**\nWhat is one thing you will DO differently because of this conversation? Write it down now.`
            };

            return actions[context] || actions.general;
        }

        // Extract topic from message
        function extractTopic(message) {
            // Simple extraction - take key phrases or shorten
            const words = message.split(' ').filter(w => w.length > 3);
            if (words.length <= 5) return message.toLowerCase();
            return words.slice(0, 5).join(' ').toLowerCase() + '...';
        }

        // Show typing indicator
        function showTyping() {
            const indicator = document.getElementById('typingIndicator');
            document.getElementById('typingAvatar').textContent = getInitials(currentMentor.name);
            indicator.classList.add('active');
            document.getElementById('chatArea').scrollTop = document.getElementById('chatArea').scrollHeight;
        }

        // Hide typing indicator
        function hideTyping() {
            document.getElementById('typingIndicator').classList.remove('active');
        }

        // Save quote
        function saveQuote(element) {
            if (!currentMentor) return;

            const quote = element.querySelector('.message-text').textContent;

            // Initialize conversation data if needed
            if (!conversationsData.conversations[currentMentor.id]) {
                conversationsData.conversations[currentMentor.id] = {
                    sessions: [],
                    total_sessions: 0,
                    favorite_quotes: [],
                    personal_notes: "",
                    last_session_date: null,
                    insights_gained: []
                };
            }

            const conv = conversationsData.conversations[currentMentor.id];
            if (!conv.favorite_quotes.includes(quote)) {
                conv.favorite_quotes.push(quote);
                saveData();
                updateNotesPanel(currentMentor);
                showSaveIndicator('Quote saved!');
            }
        }

        // Add insight
        function addInsight() {
            const input = document.getElementById('insightInput');
            const insight = input.value.trim();

            if (!insight || !currentMentor) return;

            // Initialize conversation data if needed
            if (!conversationsData.conversations[currentMentor.id]) {
                conversationsData.conversations[currentMentor.id] = {
                    sessions: [],
                    total_sessions: 0,
                    favorite_quotes: [],
                    personal_notes: "",
                    last_session_date: null,
                    insights_gained: []
                };
            }

            conversationsData.conversations[currentMentor.id].insights_gained.push(insight);
            currentSession.insights.push(insight);
            input.value = '';

            saveData();
            updateNotesPanel(currentMentor);
        }

        // Remove insight
        function removeInsight(idx) {
            if (!currentMentor) return;

            const conv = conversationsData.conversations[currentMentor.id];
            if (conv && conv.insights_gained) {
                conv.insights_gained.splice(idx, 1);
                saveData();
                updateNotesPanel(currentMentor);
            }
        }

        // Save conversation
        function saveConversation() {
            if (!currentMentor || currentSession.messages.length === 0) {
                showSaveIndicator('No messages to save');
                return;
            }

            // Initialize conversation data if needed
            if (!conversationsData.conversations[currentMentor.id]) {
                conversationsData.conversations[currentMentor.id] = {
                    sessions: [],
                    total_sessions: 0,
                    favorite_quotes: [],
                    personal_notes: "",
                    last_session_date: null,
                    insights_gained: []
                };
            }

            const conv = conversationsData.conversations[currentMentor.id];

            // Create session
            const session = {
                date: new Date().toISOString().split('T')[0],
                messages: [...currentSession.messages],
                insights: [...currentSession.insights],
                mood: currentSession.mood
            };

            conv.sessions.push(session);
            conv.total_sessions++;
            conv.last_session_date = session.date;
            conv.personal_notes = document.getElementById('notesTextarea').value;

            conversationsData.total_sessions++;
            conversationsData.last_updated = session.date;

            saveData();
            updateProfilePanel(currentMentor);
            renderMentorList(); // Update session counts
            showSaveIndicator('Conversation saved!');
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('mentorConversations', JSON.stringify(conversationsData));
        }

        // Show save indicator
        function showSaveIndicator(text = 'Saved!') {
            const indicator = document.getElementById('saveIndicator');
            indicator.textContent = text;
            indicator.style.display = 'block';
            setTimeout(() => {
                indicator.style.display = 'none';
            }, 2000);
        }

        // Toggle profile panel
        function toggleProfile() {
            const panel = document.getElementById('profilePanel');
            const notesPanel = document.getElementById('notesPanel');
            notesPanel.classList.remove('active');
            panel.classList.toggle('active');
        }

        // Toggle notes panel
        function toggleNotes() {
            const panel = document.getElementById('notesPanel');
            const profilePanel = document.getElementById('profilePanel');
            profilePanel.classList.remove('active');
            panel.classList.toggle('active');
        }

        // Setup event listeners
        function setupEventListeners() {
            // Search
            document.getElementById('mentorSearch').addEventListener('input', (e) => {
                const activeCategory = document.querySelector('.category-btn.active').dataset.category;
                renderMentorList(activeCategory, e.target.value);
            });

            // Category filters
            document.getElementById('categoryFilters').addEventListener('click', (e) => {
                if (e.target.classList.contains('category-btn')) {
                    document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    const search = document.getElementById('mentorSearch').value;
                    renderMentorList(e.target.dataset.category, search);
                }
            });

            // Chat input
            const chatInput = document.getElementById('chatInput');
            chatInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Auto-resize textarea
            chatInput.addEventListener('input', () => {
                chatInput.style.height = 'auto';
                chatInput.style.height = Math.min(chatInput.scrollHeight, 150) + 'px';
            });

            // Mood buttons
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentSession.mood = btn.dataset.mood;
                });
            });

            // Notes auto-save
            document.getElementById('notesTextarea').addEventListener('input', debounce(() => {
                if (currentMentor) {
                    if (!conversationsData.conversations[currentMentor.id]) {
                        conversationsData.conversations[currentMentor.id] = {
                            sessions: [],
                            total_sessions: 0,
                            favorite_quotes: [],
                            personal_notes: "",
                            last_session_date: null,
                            insights_gained: []
                        };
                    }
                    conversationsData.conversations[currentMentor.id].personal_notes = document.getElementById('notesTextarea').value;
                    saveData();
                }
            }, 1000));

            // Insight input enter key
            document.getElementById('insightInput').addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    addInsight();
                }
            });
        }

        // Debounce helper
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
